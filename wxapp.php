<?php
 defined("\x49\x4e\137\x49\x41") or die("\x41\143\143\145\x73\x73\x20\x44\145\156\151\x65\x64"); class Amouse_Wxapp_CardModuleWxapp extends WeModuleWxapp { public function doPageApiGetSlide() { goto qmmm8; kXS9U: $message = "\163\165\143\x63\145\x73\163"; goto XgdKw; XgdKw: $uniacid = $_W["\165\x6e\151\141\143\x69\144"]; goto L_Wy1; L_Wy1: $slides = pdo_getall("\x61\x6d\x6f\165\x73\145\137\167\x78\141\160\160\137\143\x61\162\x64\x5f\163\x6c\151\144\x65", array("\x75\x6e\151\141\143\151\144" => $uniacid), array("\164\150\x75\x6d\x62", "\x6e\141\155\145", "\151\144", "\165\162\154")); goto W8LVj; W8LVj: foreach ($slides as $key => $value) { $slides[$key]["\164\150\x75\x6d\142"] = tomedia($slides[$key]["\x74\150\165\155\142"]); Rxe12: } goto KVBhe; BOwzx: return $this->result(0, $message, $slides); goto hGeD8; KVBhe: kq_CA: goto BOwzx; qmmm8: global $_W; goto kXS9U; hGeD8: } public function doPageApiGetSys() { goto vT89L; kntyP: $set = pdo_fetch("\123\x45\x4c\105\103\124\40\52\40\106\x52\x4f\115\x20" . tablename("\x61\x6d\157\165\163\145\137\167\x78\x61\x70\x70\x5f\x73\171\163\163\145\x74") . "\x20\x57\110\x45\x52\105\40\x60\x75\156\x69\x61\143\x69\144\x60\75\40\72\167\145\151\x64\40\40\154\151\155\151\x74\40\x31\40", array("\x3a\167\x65\x69\x64" => $uniacid)); goto JwRTd; ZIbDT: return $this->result(0, '', $return); goto A8YoW; JwRTd: $return = array(); goto E92MD; E92MD: $set["\154\157\x67\157"] = tomedia($set["\154\157\x67\157"]); goto K4ytY; vT89L: global $_W; goto TdPrS; K4ytY: $return["\163\x65\164"] = $set; goto ZIbDT; TdPrS: $uniacid = $_W["\x75\156\x69\141\x63\x69\144"]; goto kntyP; A8YoW: } public function doPageApiGetMyCard() { goto nfnbo; Yioli: EQ1lK: goto D3rK0; GZLA3: $uniacid = $_W["\165\156\151\x61\143\x69\x64"]; goto zZnRw; gKzEk: $contion = "\x20\x57\x48\x45\x52\x45\40\x60\165\156\x69\141\143\151\144\x60\75\72\167\145\x69\144\40\x61\x6e\144\40\140\x6f\160\145\x6e\x69\x64\140\x3d\x3a\157\160\145\x6e\151\x64\x20"; goto f9Noa; R0gsi: $card["\x77\145\x69\170\151\156\111\155\x67"] = tomedia($card["\x77\145\x69\x78\x69\156\x49\155\x67"]); goto RcNlK; zZnRw: $login_success = $this->checkLogin(); goto HptuX; HptuX: $openid = $_W["\157\x70\x65\x6e\151\x64"]; goto eBJFO; B2u2o: $imgs = iunserializer($card["\151\155\147\163"]); goto SCQQ8; RcNlK: return $this->result(0, '', $card); goto Yioli; YBt26: gxByh: goto B2u2o; nfnbo: global $_GPC, $_W; goto GZLA3; d1gPH: RePre: goto zX7GU; SCQQ8: foreach ($imgs as $key => $imgid) { $imgs[$key] = tomedia($imgid); D7QeO: } goto fGO1D; pnZvu: $card["\151\x6d\147\x73"] = $imgs; goto gWIuA; v7K1R: $contion .= "\40\x61\156\144\x20\x69\144\x3d\47{$cardId}\47\x20"; goto d1gPH; eBJFO: $cardId = intval($_GPC["\143\x61\162\x64\151\144"]); goto tfzDV; MbWaa: if (!empty($card)) { goto gxByh; } goto CyG1e; IWpBw: load()->func("\x6c\x6f\x67\x67\x69\x6e\147"); goto gKzEk; gWIuA: $card["\141\166\141\x74\x65\162"] = tomedia($card["\x61\x76\141\x74\145\x72"]); goto R0gsi; fGO1D: HtunX: goto pnZvu; Q8lJo: if ($nPJp8) { goto RePre; } goto v7K1R; CyG1e: return $this->result(0, '', 0); goto Dpv3Z; Dpv3Z: goto EQ1lK; goto YBt26; zX7GU: $card = pdo_fetch("\123\105\114\x45\x43\124\40\x2a\x20\x46\x52\x4f\x4d\40" . tablename("\141\x6d\x6f\165\x73\145\x5f\167\x78\141\160\x70\137\x63\141\162\144") . "{$contion}\40\154\x69\155\x69\164\40\61", array("\72\167\145\151\x64" => $uniacid, "\x3a\x6f\x70\x65\x6e\x69\x64" => $openid)); goto MbWaa; f9Noa: $nPJp8 = !($cardId > 0); goto Q8lJo; tfzDV: $fredidId = intval($_GPC["\x66\143\x61\x72\144\x69\x64"]); goto IWpBw; D3rK0: } private function processCommission($openid, $qr, $qrmember) { goto hG3dA; b0B7_: pdo_update("\141\155\157\x75\x73\x65\137\167\170\x61\x70\x70\137\155\x65\155\x62\145\x72", array("\154\145\x76\x65\x6c\137\146\x69\162\163\164\137\x69\x64" => $qrmember["\x69\x64"]), array("\x69\144" => $fans["\x69\x64"])); goto QY48B; IpklM: SChJb: goto Vm2fv; hG3dA: $HsWWG = !(!empty($qr) && $fans["\154\x65\166\x65\154\137\146\x69\x72\163\164\137\151\x64"] == 0); goto MdMj1; k5DiC: LEZto: goto IpklM; xARPy: if ($PbbG9) { goto SChJb; } goto lnV1F; Vm2fv: Q_T8b: goto gifpp; smOrX: $zxYsE = !($second_member["\x6c\x65\x76\145\x6c\137\x66\x69\x72\163\164\x5f\151\x64"] > 0 && $fans["\154\145\x76\x65\154\x5f\x74\x68\162\x65\x65\x5f\151\x64"] == 0); goto BmMqs; Cz27W: $three_member = pdo_fetch("\x73\145\x6c\145\143\x74\40\x2a\x20\146\x72\x6f\x6d\x20" . tablename("\141\155\157\x75\x73\x65\137\x77\170\x61\160\160\x5f\155\145\x6d\x62\145\162") . "\40\x77\150\145\162\x65\40\165\156\x69\x61\x63\151\x64\75\72\165\x6e\151\x61\x63\151\x64\x20\x61\156\144\40\151\144\x3d\x3a\151\x64\40", array("\72\165\x6e\151\x61\x63\x69\144" => $uid, "\x3a\151\x64" => $second_member["\x6c\145\x76\145\x6c\137\146\151\x72\x73\x74\x5f\151\x64"])); goto hk2VO; hk2VO: pdo_update("\x61\x6d\157\x75\x73\145\x5f\x77\170\x61\160\x70\x5f\x6d\x65\x6d\142\145\162", array("\x6c\145\x76\x65\x6c\137\x74\x68\162\x65\145\137\151\x64" => $three_member["\x69\x64"], "\143\x72\x65\x61\164\x65\164\151\155\145" => time()), array("\151\144" => $fans["\151\144"])); goto k5DiC; lnV1F: $second_member = pdo_fetch("\x73\145\x6c\x65\x63\164\40\151\x64\54\154\145\166\x65\x6c\x5f\x73\145\143\157\156\x64\137\x69\x64\54\154\145\x76\145\154\137\146\x69\162\x73\x74\137\x69\x64\x2c\x6f\160\x65\x6e\151\x64\40\146\162\157\x6d\40" . tablename("\141\x6d\x6f\165\x73\x65\x5f\167\170\x61\160\160\x5f\x6d\x65\x6d\x62\x65\162") . "\40\167\150\x65\162\145\x20\140\x75\x6e\151\141\143\x69\x64\140\x3d\72\165\x6e\x69\x61\x63\x69\x64\x20\141\x6e\x64\40\140\151\144\x60\x3d\72\151\x64\40", array("\x3a\165\x6e\x69\141\143\x69\144" => $uid, "\x3a\x69\x64" => $qrmember["\x6c\145\x76\x65\154\x5f\146\x69\x72\x73\x74\x5f\151\x64"])); goto nLa74; QY48B: $PbbG9 = !($fans["\x6c\x65\x76\x65\154\x5f\x73\145\143\157\x6e\144\137\x69\144"] == 0); goto xARPy; BmMqs: if ($zxYsE) { goto LEZto; } goto Cz27W; MdMj1: if ($HsWWG) { goto Q_T8b; } goto b0B7_; nLa74: pdo_update("\141\x6d\x6f\165\x73\145\137\x77\170\141\160\x70\x5f\x6d\145\155\x62\145\x72", array("\x6c\145\x76\145\154\x5f\x73\x65\143\x6f\156\x64\x5f\x69\144" => $second_member["\151\x64"]), array("\x69\x64" => $fans["\x69\x64"])); goto smOrX; gifpp: } public function doPageApiGetCardById() { goto wLsks; JWqoU: $card["\151\x73\x5f\143\157\154\x6c\145\143\164"] = $is_collect; goto s9nAJ; F1lYY: $view = pdo_fetchcolumn("\x53\105\x4c\105\x43\x54\40\x63\x6f\165\x6e\164\x28\x69\x64\51\x20\x46\x52\117\115\x20" . tablename("\141\155\157\165\x73\145\x5f\167\x78\141\160\x70\x5f\x63\141\x72\144\137\150\x69\x73\x74\157\162\171") . "\40\x57\x48\105\x52\105\40\x66\x72\157\x6d\x5f\165\x73\145\162\75\72\x6f\160\x65\156\151\144\x20\x61\156\144\x20\x63\x61\162\x64\151\144\75\x3a\x63\x61\x72\x64\151\144\40\x61\x6e\x64\40\x75\156\x69\x61\143\x69\144\x3d\x3a\x75\x6e\151\141\143\x69\x64\40\x61\156\144\40\163\x6d\163\137\164\x79\x70\x65\x3d\x30\40\154\x69\155\x69\164\40\x31\x20", array("\72\157\x70\145\x6e\x69\144" => $openid, "\72\x63\141\162\x64\151\x64" => $cardId, "\x3a\165\x6e\151\x61\143\151\x64" => $uniacid)); goto l4ybs; QH0H2: $is_zan = $zan > 0 ? 1 : 0; goto LC9fO; vJ31G: $cardId = intval($_GPC["\137\143\x61\162\144\x5f\x69\x64"]); goto sv04l; zuDkf: $contion .= "\40\141\x6e\x64\x20\151\144\75\x27{$cardId}\47\x20"; goto il1Fv; ixgkW: if ($kzE7K) { goto UAwO7; } goto cg8Uf; PSUQL: foreach ($imgs as $key => $imgid) { $imgs[$key] = tomedia($imgid); f2JwX: } goto WFazW; EDnQN: $mcard = pdo_fetch("\x53\105\x4c\x45\103\124\x20\x60\151\x64\x60\54\x60\157\x70\145\x6e\151\x64\140\54\40\x60\x6d\x6f\142\x69\154\145\140\54\x20\140\x65\x6d\141\151\154\140\x2c\40\140\x77\x65\x69\x78\151\x6e\x60\54\x60\x77\x65\151\x78\x69\x6e\x49\x6d\x67\140\54\40\x60\x63\157\155\x70\x61\156\171\140\54\40\x60\x6a\157\x62\140\x2c\x60\161\x71\140\54\140\151\x6e\x64\165\163\164\162\171\140\x2c\x60\x64\145\x70\x61\162\x74\x6d\x65\156\164\140\x2c\x60\144\x65\x73\143\140\54\140\151\155\x67\x73\x60\54\x60\172\141\x6e\140\x2c\140\x76\x69\145\x77\x60\x2c\140\x63\157\154\x6c\x65\143\x74\140\x2c\x60\x61\166\141\x74\145\162\140\54\140\x75\163\x65\162\x6e\141\x6d\x65\x60\x20\106\122\117\115\x20" . tablename("\x61\x6d\157\x75\x73\x65\137\167\170\141\x70\160\x5f\143\x61\162\144") . "\x20\x57\x48\x45\x52\105\x20\x60\x75\156\151\x61\x63\151\x64\x60\75\x3a\167\x65\x69\x64\x20\x61\156\x64\x20\x60\157\160\145\156\151\x64\x60\75\x3a\x6f\160\145\x6e\x69\x64\x20\x6c\151\x6d\x69\164\40\x31", array("\72\x77\145\151\144" => $uniacid, "\72\157\x70\145\156\x69\144" => $openid)); goto dC5HD; fe8_d: $card["\x61\166\x61\x74\145\x72"] = tomedia($card["\x61\x76\141\164\x65\x72"]); goto mh_2i; l4ybs: $zan = pdo_fetchcolumn("\123\x45\114\105\103\124\40\x63\157\165\x6e\164\50\151\x64\x29\40\x46\122\x4f\x4d\x20" . tablename("\x61\155\x6f\165\163\145\x5f\167\170\141\x70\x70\x5f\143\x61\x72\x64\x5f\x68\x69\163\x74\157\162\171") . "\x20\127\x48\x45\x52\x45\x20\146\162\157\x6d\137\165\163\x65\162\75\x3a\x6f\x70\145\x6e\151\144\x20\141\x6e\144\x20\x63\x61\162\144\151\144\x3d\x3a\x63\141\162\x64\x69\x64\x20\141\x6e\144\40\x75\x6e\151\x61\x63\x69\144\75\72\165\156\151\x61\143\151\x64\40\141\156\144\x20\x73\x6d\163\137\x74\x79\x70\x65\x3d\x31\40\x6c\x69\155\151\x74\x20\61\40", array("\72\157\160\x65\156\151\144" => $openid, "\x3a\143\x61\x72\x64\151\144" => $cardId, "\x3a\165\156\x69\x61\x63\151\144" => $uniacid)); goto d21eL; sv04l: $contion = "\40\x57\x48\x45\x52\x45\40\x60\x75\x6e\151\x61\x63\151\x64\x60\x3d\72\167\x65\151\144\x20\x20\40"; goto bxx0y; DlIEg: return $this->result(0, '', $card); goto xTlbi; mnI_3: $card["\x77\x65\x69\170\151\156\111\155\x67"] = tomedia($card["\x77\145\151\x78\151\x6e\x49\155\x67"]); goto gEvf0; C0hKi: if ($nPJp8) { goto WdMus; } goto zuDkf; wLsks: global $_GPC, $_W; goto ng7ZZ; hTAOC: if ($MjuAp) { goto q3ooO; } goto F1lYY; ugbsp: pdo_update("\x61\x6d\157\165\x73\x65\x5f\167\x78\x61\160\x70\137\x63\141\x72\144", array("\166\151\145\x77" => $card["\x76\x69\145\x77"] + 1), array("\x69\x64" => $cardId)); goto V3HJJ; s9nAJ: q3ooO: goto toMaQ; toMaQ: $imgs = iunserializer($card["\151\x6d\x67\163"]); goto PSUQL; jAsO6: KoZI4: goto fe8_d; il1Fv: WdMus: goto UIxjd; G49AW: $openid = $_W["\x6f\160\145\156\151\x64"]; goto vJ31G; SgSZC: $MjuAp = !($openid != $card["\157\160\145\156\x69\x64"]); goto hTAOC; cg8Uf: $insert = array("\143\141\x72\x64\151\x64" => $cardId, "\163\x6d\163\x5f\164\x79\x70\x65" => 0, "\x75\156\x69\141\x63\x69\144" => $_W["\165\156\x69\141\143\151\x64"], "\146\x72\x6f\155\x5f\165\x73\x65\162" => $openid, "\x74\x6f\137\x75\x73\x65\x72" => $card["\157\x70\x65\x6e\x69\x64"]); goto Keomx; d21eL: $collect = pdo_fetchcolumn("\123\105\x4c\105\x43\x54\40\x63\157\165\x6e\x74\x28\x69\144\51\40\x46\122\117\115\40" . tablename("\x61\x6d\157\165\x73\145\137\x77\170\141\x70\x70\137\x63\141\x72\144\x5f\x68\x69\163\x74\x6f\x72\171") . "\x20\x57\110\x45\x52\x45\x20\146\162\157\155\x5f\165\163\x65\162\x3d\x3a\157\160\145\x6e\151\x64\x20\x61\x6e\144\40\143\141\x72\144\x69\x64\75\72\x63\x61\162\x64\151\144\x20\x61\156\144\40\x75\156\x69\x61\x63\151\x64\x3d\72\x75\156\x69\x61\143\x69\x64\40\141\156\x64\x20\x73\155\163\x5f\x74\x79\x70\x65\x3d\62\40\x6c\x69\x6d\x69\164\40\x31\x20", array("\72\157\160\145\x6e\x69\144" => $openid, "\x3a\x63\141\162\144\151\144" => $cardId, "\72\x75\156\151\141\143\151\x64" => $uniacid)); goto tbtV4; LC9fO: $is_collect = $collect > 0 ? 1 : 0; goto X_zjS; WFazW: rT7TZ: goto mnI_3; X_zjS: $card["\151\163\137\154\x69\153\x65"] = $is_zan; goto JWqoU; bxx0y: $nPJp8 = !($cardId > 0); goto C0hKi; dC5HD: $Zjnnh = !(!empty($card) && $mcard); goto YHE9b; gEvf0: $card["\151\x6d\x67\x73"] = $imgs; goto jAsO6; YHE9b: if ($Zjnnh) { goto KoZI4; } goto SgSZC; tbtV4: $kzE7K = !($view <= 0); goto ixgkW; ng7ZZ: $uniacid = $_W["\x75\x6e\151\x61\143\x69\x64"]; goto G49AW; mh_2i: $card["\143\x75\x72\162\137\157\x70\145\156\151\144"] = $openid; goto DlIEg; UIxjd: $card = pdo_fetch("\x53\x45\114\x45\x43\124\x20\x60\151\x64\x60\x2c\140\157\160\145\156\151\144\x60\x2c\40\x60\x6d\157\x62\151\x6c\145\x60\x2c\40\x60\x65\155\x61\x69\x6c\x60\x2c\x20\140\x77\145\151\x78\151\156\x60\x2c\140\x77\x65\151\x78\x69\156\x49\x6d\x67\x60\x2c\40\x60\x63\157\x6d\160\x61\x6e\x79\x60\54\x20\140\152\x6f\x62\140\54\140\x71\161\140\x2c\140\x69\156\x64\165\x73\164\162\x79\x60\x2c\140\144\x65\160\141\x72\x74\155\145\x6e\x74\x60\54\140\144\145\x73\x63\x60\x2c\140\x69\155\147\163\140\54\140\x7a\x61\x6e\x60\54\140\166\151\x65\167\140\x2c\x60\143\157\x6c\x6c\145\143\x74\140\54\x60\x61\166\x61\164\145\162\140\54\140\165\163\x65\x72\156\141\x6d\x65\x60\40\x46\x52\x4f\x4d\x20" . tablename("\x61\x6d\157\165\163\145\137\x77\170\x61\x70\x70\x5f\143\141\162\x64") . "{$contion}\40\154\151\x6d\x69\164\40\61", array("\72\167\145\151\x64" => $uniacid)); goto EDnQN; V3HJJ: UAwO7: goto QH0H2; Keomx: pdo_insert("\x61\x6d\157\165\163\x65\137\167\170\x61\x70\x70\137\x63\x61\x72\x64\x5f\x68\x69\163\164\157\x72\x79", $insert); goto ugbsp; xTlbi: } public function doPageApiPostClick() { goto M0MgH; wgICM: goto KU0bS; goto fR4Ks; whqUe: $fcard["\x7a\x61\156"] = $fcard["\x7a\141\156"] + 1; goto iZpqb; m4LKG: $openid = $_W["\x6f\x70\145\x6e\x69\144"]; goto doE9m; NRvGM: $fcard["\x77\x65\x69\170\151\x6e\111\x6d\147"] = tomedia($fcard["\x77\145\x69\x78\151\156\x49\155\147"]); goto Mtre_; y0q_6: $imgs = iunserializer($fcard["\151\155\x67\163"]); goto KQDRg; R1T9k: $fcard["\151\x73\x5f\x6c\151\x6b\x65"] = 1; goto whqUe; Pl1gR: $fcard["\x69\163\137\144\x65\x6c\x65\164\x65"] = 1; goto Lqqt5; nGz50: EWhDA: goto jz0as; NDkGz: $mcard = pdo_fetch("\x53\x45\x4c\105\x43\124\x20\52\40\x46\122\x4f\115\40" . tablename("\x61\x6d\157\165\x73\x65\137\167\x78\x61\160\x70\x5f\143\x61\x72\144") . "\40\127\x48\105\122\x45\x20\x60\165\156\151\141\143\151\144\x60\x3d\72\x77\145\x69\x64\40\40\x61\156\144\x20\157\160\145\x6e\151\144\75\72\157\x70\x65\x6e\151\144\x20\x6c\151\x6d\151\164\x20\x31", array("\x3a\x77\x65\151\x64" => $uniacid, "\x3a\x6f\x70\145\x6e\x69\x64" => $openid)); goto qpniK; r7U0n: pdo_insert("\141\x6d\157\x75\163\x65\137\167\170\141\160\160\137\x63\141\x72\x64\x5f\150\151\163\164\x6f\162\x79", $insert); goto ZQwjH; CnVig: $fcard["\143\157\x6c\x6c\145\x63\164"] = $fcard["\143\x6f\154\x6c\x65\143\164"] - 1; goto wgICM; KQDRg: foreach ($imgs as $key => $imgid) { $imgs[$key] = tomedia($imgid); FKoyz: } goto V9w5P; krQ_I: $uniacid = $_W["\x75\156\x69\x61\143\x69\144"]; goto whKJj; qpniK: if ($fcard["\151\144"] != $mcard["\x69\144"]) { goto jY0d3; } goto U0gwe; WRMBs: pdo_delete("\x61\x6d\x6f\165\163\145\137\167\170\141\160\x70\x5f\x63\141\162\144\x5f\x68\x69\163\164\157\162\x79", array("\151\x64" => $zan["\151\144"])); goto Y_U1T; TDyx3: e_7R_: goto CEBNS; doE9m: $friend_user_id = intval($_GPC["\146\162\151\x65\x6e\144\x5f\x75\x73\145\162\137\x69\x64"]); goto GQSJM; iZpqb: H7ckJ: goto my8Kw; k_OSd: pdo_update("\141\155\x6f\165\x73\145\x5f\167\x78\141\160\x70\137\143\141\x72\144", "\143\157\x6c\154\145\x63\x74\75\x63\x6f\x6c\x6c\x65\x63\164\x2d\x31", array("\151\144" => $friend_user_id)); goto KuWFC; KuWFC: pdo_delete("\x61\x6d\157\x75\163\145\x5f\167\170\x61\160\160\137\x63\x61\162\x64\x5f\x68\x69\163\x74\157\x72\x79", array("\x69\144" => $collect["\151\144"])); goto yr8BK; Lqqt5: pdo_update("\141\x6d\x6f\165\163\145\x5f\167\170\x61\160\160\137\x63\141\x72\x64", "\172\141\x6e\75\172\141\156\55\x31", array("\151\144" => $friend_user_id)); goto WRMBs; KbMdM: jXe0r: goto Mc1kI; E1NX3: jY0d3: goto n_G2B; nZM0N: $UBR6h = empty($zan); goto R1zEK; ZHTlL: $collect = pdo_fetch("\123\x45\x4c\105\x43\124\40\x2a\40\106\122\x4f\115\40" . tablename("\141\155\157\165\163\x65\x5f\167\x78\141\160\x70\x5f\143\141\162\x64\137\150\x69\163\x74\x6f\x72\171") . "\x20\127\110\x45\x52\105\40\x66\x72\157\155\x5f\x75\x73\145\162\75\72\157\160\145\156\x69\144\40\141\156\x64\x20\x63\x61\x72\144\151\144\x3d\x3a\x63\141\162\x64\151\144\x20\x61\x6e\144\40\x75\x6e\151\141\143\151\144\75\x3a\x75\x6e\x69\141\143\x69\144\x20\x61\156\144\x20\x73\x6d\163\x5f\x74\x79\x70\145\x3d\62\x20\154\151\155\151\164\x20\x31\x20", array("\72\157\160\145\156\x69\144" => $openid, "\x3a\143\141\x72\x64\151\x64" => $friend_user_id, "\x3a\165\x6e\x69\141\x63\x69\x64" => $uniacid)); goto A6ZT1; Mtre_: $fcard["\151\155\x67\163"] = $imgs; goto gBS16; Yywdl: cHZGN: goto Or4LX; whKJj: $curr_openid = $_GPC["\155\x79\137\165\163\x65\162\137\x69\x64"]; goto m4LKG; HMKm1: $fcard["\x7a\141\x6e"] = $fcard["\172\x61\x6e"] - 1; goto xZyxd; GQSJM: $view_type = $_GPC["\166\x69\145\167\137\164\x79\160\x65"]; goto Llrmh; c4Nc5: $insert = array("\143\141\x72\144\151\x64" => $friend_user_id, "\x73\155\x73\x5f\164\x79\x70\x65" => 1, "\x75\156\x69\x61\143\x69\x64" => $_W["\x75\x6e\x69\x61\143\151\144"], "\x7a\x61\156\x5f\155\x69\x64" => $zan["\172\141\156\x5f\x6d\x69\x64"] + 1, "\146\x72\x6f\155\x5f\165\x73\x65\162" => $openid, "\x74\x6f\x5f\165\163\145\x72" => $fcard["\157\160\145\x6e\151\x64"]); goto m68qn; CEBNS: if (empty($collect)) { goto I0KFi; } goto k_OSd; gBS16: return $this->result(0, '', $fcard); goto pC5Hl; M0MgH: global $_GPC, $_W; goto krQ_I; zu7js: KU0bS: goto nZM0N; yr8BK: $fcard["\151\163\137\x63\x6f\x6c\154\145\143\x74"] = 0; goto CnVig; jz0as: goto S5t_s; goto ddkIO; uE08X: if ($gKp5R) { goto cHZGN; } goto dKofi; ckZhi: goto S5t_s; goto TDyx3; e4L2s: if (empty($zan)) { goto jXe0r; } goto Pl1gR; R1zEK: if ($UBR6h) { goto EWhDA; } goto SCnh8; oGjQn: if ($view_type == "\172\141\156") { goto QbYYj; } goto ckZhi; ddkIO: QbYYj: goto e4L2s; Mc1kI: $fcard["\x69\163\137\144\x65\154\x65\x74\145"] = 0; goto c4Nc5; A6ZT1: if ($view_type == "\x63\157\x6c\154\145\x63\x74") { goto e_7R_; } goto oGjQn; SCnh8: $fcard["\151\x73\137\154\151\x6b\x65"] = 1; goto nGz50; ZQwjH: pdo_update("\141\x6d\x6f\165\163\145\x5f\x77\x78\141\x70\x70\137\x63\x61\162\x64", "\143\157\x6c\x6c\145\143\x74\75\x63\157\154\x6c\145\x63\x74\53\61", array("\x69\144" => $friend_user_id)); goto vWPWr; LkEXB: $insert = array("\x63\141\162\144\x69\144" => $friend_user_id, "\163\155\163\137\x74\171\160\x65" => 2, "\165\156\x69\141\143\151\144" => $_W["\165\x6e\x69\141\x63\x69\144"], "\172\x61\156\137\x63\x69\x64" => $zan["\172\x61\156\137\x63\x69\x64"] + 1, "\146\x72\x6f\155\137\x75\x73\145\162" => $openid, "\x74\157\x5f\x75\163\145\162" => $fcard["\x6f\x70\145\156\x69\x64"]); goto r7U0n; m4f_k: $fcard["\x63\x6f\154\x6c\x65\x63\x74"] = $fcard["\x63\157\154\x6c\x65\143\164"] + 1; goto zu7js; my8Kw: $gKp5R = empty($collect); goto uE08X; Or4LX: S5t_s: goto y0q_6; v5zYI: pdo_update("\141\x6d\157\165\163\145\x5f\x77\170\x61\x70\160\137\143\x61\x72\x64", "\172\141\156\x3d\x7a\141\156\x2b\61", array("\151\x64" => $friend_user_id)); goto R1T9k; Llrmh: $fcard = pdo_fetch("\123\x45\x4c\105\x43\x54\40\x2a\x20\106\122\x4f\115\40" . tablename("\x61\x6d\157\x75\x73\145\137\167\170\x61\160\160\137\x63\x61\162\144") . "\40\x57\110\x45\x52\105\x20\140\165\156\x69\x61\143\x69\144\x60\75\x3a\x77\145\x69\144\x20\x20\141\156\x64\x20\151\x64\x3d\x3a\x69\144\40\x6c\x69\155\x69\164\40\x31", array("\72\x77\145\151\144" => $uniacid, "\x3a\x69\x64" => $friend_user_id)); goto NDkGz; pC5Hl: kBzQ_: goto WBgLY; m68qn: pdo_insert("\x61\155\157\165\x73\145\137\x77\170\x61\x70\x70\x5f\143\x61\162\144\x5f\150\x69\163\164\157\162\x79", $insert); goto v5zYI; fR4Ks: I0KFi: goto LkEXB; n_G2B: $zan = pdo_fetch("\123\105\114\x45\103\124\x20\52\40\106\122\x4f\x4d\x20" . tablename("\x61\155\x6f\165\x73\145\137\x77\170\x61\160\160\137\x63\141\x72\x64\x5f\x68\x69\x73\164\x6f\162\171") . "\x20\127\110\x45\x52\105\x20\x66\162\x6f\155\137\x75\163\145\x72\x3d\72\x6f\160\x65\156\151\x64\x20\141\156\144\40\x63\x61\x72\144\x69\x64\75\x3a\x63\x61\x72\x64\151\x64\40\141\156\144\40\x75\x6e\x69\141\x63\x69\144\75\72\165\x6e\151\x61\x63\151\x64\x20\141\x6e\x64\x20\x73\x6d\163\137\164\171\x70\145\75\61\x20\x6c\151\x6d\x69\164\40\61\40", array("\72\157\160\145\156\x69\x64" => $openid, "\72\143\x61\x72\144\x69\x64" => $friend_user_id, "\72\x75\156\x69\x61\143\x69\144" => $uniacid)); goto ZHTlL; Y_U1T: $fcard["\151\x73\x5f\x6c\x69\153\145"] = 0; goto HMKm1; V9w5P: dfpnN: goto NRvGM; kr9e3: goto kBzQ_; goto E1NX3; U0gwe: return $this->result(1, '', $fcard); goto kr9e3; dKofi: $fcard["\151\163\x5f\x63\x6f\x6c\154\x65\x63\164"] = 1; goto Yywdl; xZyxd: goto H7ckJ; goto KbMdM; vWPWr: $fcard["\x69\163\137\x63\157\154\154\145\x63\164"] = 1; goto m4f_k; WBgLY: } public function doPageApiGetTop() { goto Hhn0k; a6JAP: if (count($list) > 0) { goto E1JN0; } goto eiK0b; lBaaL: $list = pdo_fetchall($sql, array("\x3a\x77\145\x69\144" => $uniacid)); goto f8GxX; u0kU1: if ($type == "\x63\x6f\x6c\x6c\145\x63\164") { goto ecBeL; } goto r1itB; lT8Y4: $psize = max(10, intval($_GPC["\x70\x73\151\x7a\145"])); goto w0BQK; ml9CJ: $type = $_GPC["\164\x79\160\145"]; goto oBepM; B29PC: if ($type == "\166\151\145\x77") { goto gFqY4; } goto imNjJ; RQLVe: $return["\x67\x74\x6f\x74\x61\154"] = $tpage; goto XnnU2; r1itB: goto lwj7R; goto i7nXd; w0BQK: $start = ($pindex - 1) * $psize; goto B29PC; MM6JI: foreach ($list as $key => $value) { $list[$key]["\x61\x76\141\x74\145\x72"] = empty($value["\141\x76\141\164\145\x72"]) ? tomedia($value["\167\x65\151\x78\151\x6e\x49\155\x67"]) : tomedia($value["\141\166\x61\164\x65\162"]); UYshI: } goto rqTrK; XfeW2: $orderby = "\40\x4f\122\x44\105\122\40\x42\131\x20\166\151\145\167\40\x44\105\123\103\40"; goto HRkPM; Ud1G5: $return["\x6c\151\163\164"] = $list; goto RQLVe; f8GxX: $total = pdo_fetchcolumn("\123\x45\x4c\105\103\x54\40\x43\x4f\x55\x4e\124\50\x2a\x29\x20\106\x52\117\x4d\40" . tablename("\x61\155\x6f\165\x73\145\137\x77\x78\x61\160\x70\137\143\x61\x72\144") . "\40\x20\x57\110\x45\x52\105\x20\x60\x75\x6e\x69\141\143\151\144\140\x20\75\x3a\167\145\151\144\x20\x20", array("\x3a\x77\x65\151\x64" => $uniacid)); goto BDgXK; bBf1Z: goto lwj7R; goto yCiKY; nBkC6: goto xQVb3; goto LKop5; imNjJ: if ($type == "\x7a\x61\156") { goto UIFyW; } goto u0kU1; hHpsG: xQVb3: goto ZsD86; VByLb: $orderby = "\x20\117\122\x44\x45\x52\40\x42\x59\40\x63\x6f\x6c\154\145\143\x74\40\x44\x45\123\103\x20"; goto oEGU4; XnnU2: return $this->result(0, '', $return); goto hHpsG; LKop5: E1JN0: goto MM6JI; z0rad: $return = array(); goto a6JAP; Hhn0k: global $_GPC, $_W; goto qwgKz; oEGU4: lwj7R: goto BGpOE; i7nXd: gFqY4: goto XfeW2; cdgQU: $orderby = "\x20\117\122\104\x45\122\x20\102\131\40\172\141\x6e\40\x44\105\123\x43\40"; goto bBf1Z; eiK0b: return $this->result(1, '', 0); goto nBkC6; rqTrK: ZdP70: goto Ud1G5; qwgKz: $uniacid = $_W["\x75\x6e\151\x61\x63\x69\144"]; goto ml9CJ; BGpOE: $sql = "\x53\105\x4c\x45\103\x54\x20\x2a\x20\106\x52\117\x4d\x20" . tablename("\141\x6d\x6f\x75\x73\145\137\x77\170\x61\160\x70\137\x63\141\x72\144") . "\40\x57\x48\x45\122\x45\x20\140\x75\156\x69\x61\143\x69\x64\140\x20\75\x3a\x77\x65\x69\x64\40" . $orderby . "\x20\x6c\x69\x6d\x69\164\x20{$start}\54{$psize}"; goto lBaaL; yCiKY: ecBeL: goto VByLb; BDgXK: $tpage = ceil($total / $psize); goto z0rad; iohqe: UIFyW: goto cdgQU; oBepM: $pindex = max(1, intval($_GPC["\x70\x61\x67\145\111\156\144\x65\170"])); goto lT8Y4; HRkPM: goto lwj7R; goto iohqe; ZsD86: } public function doPageApiGetMyList() { goto Hr4Qb; BCngl: goto ahJGp; goto SujXl; ye6G4: $uniacid = intval($_W["\165\156\151\141\x63\151\144"]); goto MFmoK; UNf32: return $this->result(1, '', 0); goto TSeHe; yuvVb: foreach ($list as $key => $value) { goto YoRt9; H3QyS: pNGPb: goto jSZ9S; YoRt9: $list[$key]["\167\145\151\170\151\x6e\x49\155\x67"] = tomedia($value["\167\145\151\170\x69\x6e\111\x6d\x67"]); goto a5c9l; a5c9l: $list[$key]["\x61\166\141\x74\145\162"] = tomedia($value["\141\166\141\164\145\162"]); goto H3QyS; jSZ9S: } goto tjqf6; DYHbD: goto ahJGp; goto x0CI_; uLiNo: $psize = max(10, intval($_GPC["\x70\x73\x69\172\145"])); goto VPUZe; LXxwK: $list = pdo_fetchall($sql, array("\72\x77\145\x69\x64" => $uniacid, "\x3a\x74\157\137\x75\x73\145\162" => $openid)); goto sxiYQ; MpkUE: $where .= "\x20\x61\156\144\40\x68\x2e\x73\x6d\x73\x5f\x74\x79\x70\145\x3d\x31\x20"; goto QfTOC; VxTcU: if ($type == "\x76\151\145\167") { goto lVP4_; } goto U4mIv; MFmoK: $type = $_GPC["\x74\x79\x70\145"]; goto DNRCh; HEdIJ: rFufk: goto BZi9U; tDw8t: $where .= "\40\x61\x6e\144\x20\150\x2e\163\155\x73\x5f\164\171\x70\145\75\62\40"; goto rFzHV; rFzHV: ahJGp: goto zZ2gU; SIW5A: $where = "\40\141\156\x64\40\150\x2e\165\156\x69\x61\x63\x69\144\40\75\72\x77\145\x69\x64\x20\141\x6e\144\40\x68\x2e\x74\x6f\x5f\165\x73\x65\x72\75\72\164\157\x5f\x75\x73\145\x72\40"; goto VxTcU; QfTOC: goto ahJGp; goto b8EVV; b8EVV: lR6yg: goto tDw8t; U4mIv: if ($type == "\x7a\x61\156") { goto jtbuX; } goto hjQwY; TSeHe: goto rFufk; goto vVk0D; VBZy6: return $this->result(0, '', $list); goto HEdIJ; sxiYQ: if (count($list) > 0) { goto FLvQX; } goto UNf32; qYJRc: $pindex = max(1, intval($_GPC["\x70\x61\x67\145\x49\156\144\145\170"])); goto uLiNo; hjQwY: if ($type == "\143\157\x6c\154\145\x63\164") { goto lR6yg; } goto DYHbD; vVk0D: FLvQX: goto yuvVb; x0CI_: lVP4_: goto fDPnQ; VPUZe: $start = ($pindex - 1) * $psize; goto SIW5A; SujXl: jtbuX: goto MpkUE; DNRCh: $openid = $_W["\x6f\160\x65\x6e\x69\144"]; goto qYJRc; fDPnQ: $where .= "\40\x61\x6e\144\40\150\x2e\163\155\x73\137\164\171\160\145\75\x30\x20\x20"; goto BCngl; tjqf6: mYl5k: goto VBZy6; zZ2gU: $sql = "\123\105\x4c\105\x43\124\40\143\x2e\52\x20\106\x52\117\115\40" . tablename("\x61\x6d\x6f\x75\x73\x65\137\167\170\141\160\x70\137\143\x61\x72\x64\x5f\150\x69\x73\164\x6f\162\x79") . "\40\141\163\x20\150\x20\x2c" . tablename("\141\x6d\157\x75\163\145\137\167\x78\x61\160\160\137\143\141\x72\144") . "\40\x61\163\40\143\x20\x77\150\145\x72\145\x20\150\56\x66\162\x6f\x6d\137\x75\163\145\x72\x3d\x63\x2e\157\x70\145\x6e\x69\144\x20" . $where; goto LXxwK; Hr4Qb: global $_GPC, $_W; goto ye6G4; BZi9U: } public function doPageApiGetMyHolder() { goto g38Yz; BDonh: return $this->result(0, $sql, $list); goto lwiTF; dMF0v: return $this->result(1, '', 0); goto fohG4; uwd8T: He2e7: goto BDonh; SpPia: $openid = $_W["\157\x70\145\x6e\151\x64"]; goto f5UiP; Gealy: if (count($list) > 0) { goto U6FDO; } goto dMF0v; fsVBE: w1YWZ: goto ZFGbk; SwHOz: $where = "\40\x41\116\x44\40\x63\x61\x72\144\56\x75\163\x65\162\x6e\141\155\x65\x20\x4c\111\113\x45\x20\47\45{$key}\x25\47\40\157\x72\x20\x63\x61\162\144\x2e\143\x6f\x6d\160\x61\x6e\171\x20\114\111\113\x45\x20\47\x25{$key}\x25\47\40\x20"; goto fsVBE; MhYrf: $vuou0 = empty($key); goto oWS07; oWS07: if ($vuou0) { goto w1YWZ; } goto SwHOz; f5UiP: $key = $_GPC["\x73\x5f\x6b\145\x79"]; goto MhYrf; ZFGbk: $sql = "\123\105\x4c\x45\103\124\x20\143\141\162\x64\x2e\x2a\x20\146\x72\157\155\x20" . tablename("\x61\x6d\x6f\x75\163\145\x5f\167\x78\141\x70\x70\137\143\x61\x72\144") . "\x20\x61\x73\40\x63\141\162\x64\x20\167\150\x65\x72\x65\x20\143\x61\x72\144\56\x6f\160\x65\156\x69\144\40\151\156\40\50\40\x53\105\114\x45\103\x54\40\x68\56\x74\157\x5f\165\x73\145\162\x20\x20\x46\122\117\115\40" . tablename("\141\x6d\x6f\x75\x73\x65\137\167\170\141\160\x70\137\x63\x61\x72\x64\137\x68\151\x73\164\157\x72\171") . "\40\x20\x61\163\x20\150\x20\x2c" . tablename("\x61\155\157\x75\163\145\x5f\167\170\x61\160\x70\137\x63\x61\162\144") . "\x20\x20\x61\x73\40\143\x20\x77\x68\145\162\x65\40\x68\56\x66\162\157\x6d\137\x75\x73\145\162\x3d\x63\x2e\x6f\160\x65\x6e\x69\x64\40\x61\x6e\144\40\x68\x2e\x75\x6e\151\x61\x63\151\144\40\x3d\72\167\x65\151\x64\40\x61\x6e\x64\x20\150\x2e\146\x72\157\155\137\x75\163\x65\x72\x3d\x3a\x74\x6f\x5f\165\x73\145\x72\x20\x61\156\144\x20\150\x2e\163\155\x73\x5f\x74\171\160\145\75\x32\40\x29" . $where; goto ISOIZ; g38Yz: global $_GPC, $_W; goto wC6Hr; fohG4: goto UQi5g; goto IQPYg; wC6Hr: $uniacid = intval($_W["\x75\156\151\141\x63\x69\144"]); goto SpPia; IQPYg: U6FDO: goto nSljE; nSljE: foreach ($list as $key => $value) { goto p_1lj; p_1lj: $list[$key]["\167\145\x69\x78\151\x6e\x49\x6d\x67"] = tomedia($value["\167\145\151\170\x69\156\111\x6d\147"]); goto eTU6c; eTU6c: $list[$key]["\141\166\x61\x74\x65\x72"] = tomedia($value["\141\x76\141\x74\x65\162"]); goto D6qDb; D6qDb: Sc24l: goto FIaEs; FIaEs: } goto uwd8T; ISOIZ: $list = pdo_fetchall($sql, array("\72\x77\x65\x69\x64" => $uniacid, "\72\164\x6f\x5f\x75\163\145\162" => $openid)); goto Gealy; lwiTF: UQi5g: goto uhr2S; uhr2S: } public function doPageApiSendMsg() { goto RSdb_; sALts: return $this->result(1, "\xe8\xaf\xb7\xe8\276\x93\xe5\x85\xa5\xe6\x89\x8b\xe6\x9c\xba\xe5\217\267", ''); goto yZBbL; DN0ex: $w5k8S = empty($_mobile_val); goto xCTex; o0gBn: if ($A3bSI) { goto K9fkj; } goto XCMU3; MF2s2: if ($Fbqk0) { goto YdDAg; } goto cvbET; O_7SJ: $A3bSI = !($mins < 1); goto o0gBn; Xj4f_: include_once IA_ROOT . "\57\141\x64\x64\x6f\156\163\x2f\141\155\157\x75\x73\145\137\x77\x78\141\x70\x70\x5f\143\141\x72\144\x2f\101\x6c\151\x79\x75\x6e\123\x6d\x73\56\143\x6c\x61\x73\x73\56\160\x68\x70"; goto h4INR; nDUk_: return $this->result(0, '', $code); goto ckwpk; QlxIp: $uniacid = $_W["\x75\x6e\151\141\x63\x69\144"]; goto uF9Bx; UXWWr: $uyNVs = !empty($set); goto xgfx3; RIIPh: o2Q9_: goto nDUk_; xCTex: if ($w5k8S) { goto o2Q9_; } goto Xj4f_; gq6bS: hOM28: goto u3hjz; q2RsX: if (!preg_match("\57\x28\x5e\61\133\x33\174\x34\174\x35\174\67\174\70\135\x5b\60\x2d\71\135\x7b\71\x7d\x24\x29\57", $_mobile_val)) { goto hOM28; } goto CTGaK; j9dRW: k3mFC: goto Ulbmo; fKOB4: pdo_insert("\x61\x6d\x6f\165\163\x65\137\167\x78\x61\160\160\x5f\x73\155\x73", $data); goto XMdha; XCMU3: return $this->result(1, "\346\x82\250\xe7\232\x84\xe6\x93\215\xe4\275\234\xe8\277\x87\344\272\216\351\242\x91\347\xb9\x81\x2c\xe8\257\267\347\250\215\345\x90\216\xe5\206\215\350\257\x95\x72", $mins); goto N26QG; uF9Bx: $_mobile_val = trim($_GPC["\137\155\x6f\x62\151\154\x65\137\166\x61\154"]); goto FvGnr; oQNJ3: $acsResponse = $sms->_sendNewDySms($_mobile_val, $set["\x73\x6d\163\137\165\163\x65\162"], $set["\163\x6d\163\137\163\145\x63\x72\145\164"], $set["\163\x6d\163\137\146\x72\x65\145\137\163\x69\147\156\137\156\141\155\145"], $set["\162\x65\147\137\x73\x6d\x73\x5f\x63\157\x64\145"], $sms_param, $code); goto MRZdQ; mwg3z: if (!empty($userVerifyCode)) { goto VeczC; } goto wDIke; BXiVR: LnMzc: goto DN0ex; wDIke: $code = random(6, true); goto eYo0n; jESI7: YdDAg: goto C9C2n; xgfx3: if ($uyNVs) { goto ZSP5S; } goto rWq0l; Q2NJg: buFWU: goto sALts; etGMn: pdo_update("\165\x6e\151\x5f\166\145\162\x69\x66\171\143\157\144\x65", $record, array("\x69\144" => $userVerifyCode["\151\x64"])); goto BXiVR; IZseG: if ($_mobile_val == '') { goto buFWU; } goto q2RsX; W7fyY: goto KJVaM; goto C2wJa; CTGaK: goto k3mFC; goto Q2NJg; OlETA: $record["\x74\x6f\x74\x61\154"] = $userVerifyCode["\164\x6f\164\x61\154"] + 1; goto o2Vaj; TFhoV: $acsResponse = $sms->_sendAliDaYuSms($_mobile_val, $set["\x73\155\x73\137\165\163\145\162"], $set["\163\155\x73\x5f\x73\145\x63\x72\145\x74"], $set["\163\155\x73\x5f\x66\x72\145\x65\x5f\163\x69\x67\x6e\137\156\x61\x6d\145"], $set["\x72\x65\x67\x5f\x73\x6d\163\137\x63\157\144\x65"], $sms_param); goto W7fyY; h4INR: $sms = new \AliyunSms(); goto IrTEx; TqiHi: VeczC: goto au60f; IrTEx: $sms_param = "\173\42\156\165\155\x62\x65\162\42\72\42{$code}\x22\x7d"; goto BEYtq; o2Vaj: $record["\143\162\145\141\x74\145\164\x69\155\x65"] = time(); goto etGMn; MRZdQ: KJVaM: goto RIIPh; vU6PX: ZSP5S: goto IZseG; iuXfr: $mins = intval((time() - $userVerifyCode["\x63\162\145\141\164\x65\164\x69\x6d\x65"]) % 86400 % 3600 / 60); goto O_7SJ; BEYtq: if ($set["\163\155\x73\x5f\164\x79\x70\145"] == 1) { goto yzApN; } goto TFhoV; C2wJa: yzApN: goto oQNJ3; cvbET: return $this->result(1, "\346\202\250\347\232\x84\xe6\223\215\xe4\275\x9c\xe8\xbf\207\344\272\216\xe9\242\x91\xe7\271\201\54\350\257\267\xe7\xa8\x8d\xe5\x90\x8e\xe5\x86\215\350\xaf\225", ''); goto jESI7; yZBbL: goto k3mFC; goto gq6bS; XMdha: goto LnMzc; goto TqiHi; rWq0l: return $this->result(1, "\347\237\255\xe4\277\241\xe4\270\232\xe5\212\xa1\xe9\x85\215\xe7\xbd\xae\xe4\270\215\346\255\xa3\347\241\xae", $_mobile_val); goto vU6PX; u3hjz: return $this->result(1, "\xe6\202\xa8\xe8\276\x93\xe5\205\245\347\x9a\x84\346\211\213\xe6\234\xba\345\217\xb7\xe6\240\xbc\xe5\274\217\xe9\x94\231\350\257\257", ''); goto j9dRW; RSdb_: global $_GPC, $_W; goto QlxIp; N26QG: K9fkj: goto OlETA; eYo0n: $data = array("\165\x6e\151\x61\143\151\144" => $uniacid, "\x63\x6f\144\x65" => $code, "\155\157\x62\x69\x6c\x65" => $_mobile_val, "\x63\162\x65\x61\164\145\x74\151\155\145" => time()); goto fKOB4; Ulbmo: $userVerifyCode = pdo_fetch("\x53\105\x4c\105\103\x54\x20\x2a\x20\106\x52\x4f\115\x20" . tablename("\141\155\157\x75\x73\x65\137\167\x78\141\x70\x70\137\x73\155\163") . "\x20\x57\x48\x45\x52\x45\x20\x60\165\x6e\x69\x61\143\151\x64\x60\75\x20\x3a\167\145\x69\x64\40\141\156\x64\40\140\x6d\157\x62\x69\154\x65\x60\75\72\155\x6f\x62\x69\x6c\145\40", array("\72\x77\145\x69\144" => $uniacid, "\72\x6d\157\142\151\154\145" => $_mobile_val)); goto mwg3z; FvGnr: $set = pdo_fetch("\123\x45\x4c\x45\103\x54\x20\52\40\x46\x52\117\115\40" . tablename("\x61\155\157\165\163\x65\x5f\167\170\x61\160\160\x5f\x73\171\163\x73\x65\164") . "\40\x57\110\105\x52\105\40\140\165\x6e\151\141\143\x69\144\x60\75\40\x3a\x77\x65\151\x64\40\x20\x6c\x69\x6d\151\164\x20\x31\x20", array("\x3a\x77\145\x69\144" => $uniacid)); goto UXWWr; au60f: $Fbqk0 = !($userVerifyCode["\164\157\164\x61\x6c"] > 3); goto MF2s2; C9C2n: $code = $userVerifyCode["\x63\x6f\144\x65"]; goto iuXfr; ckwpk: } private function checkLogin() { goto QpgYI; RO139: if ($MBYxM) { goto Ngkdb; } goto ewFCs; Q6Czl: Ngkdb: goto X0rmN; QpgYI: global $_W; goto BuH14; ewFCs: return error(1, "\xe8\xaf\xb7\345\205\210\347\231\xbb\xe5\275\x95" . $_W["\x66\141\x6e\x73"]); goto Q6Czl; X0rmN: return true; goto Hz383; BuH14: $MBYxM = !empty($_W["\146\141\156\x73"]); goto RO139; Hz383: } public function doPageApiPostMyCard() { goto AvrJ2; dbYpx: if ($J10B5) { goto XKu7K; } goto Q0GCa; L0Lc4: $Zm7PX = !($mins > 30); goto fmG3i; mAZGL: $username = empty($_GPC["\165\x73\145\x72\x6e\141\155\145"]) ? $nickname : trim($_GPC["\165\163\x65\162\x6e\141\155\145"]); goto IH9bd; nrOfs: goto pTwSI; goto pw53C; hNmTi: $sDbZ9 = !($userVerifyCode["\163\x74\141\164\x75\163"] == 1); goto MCGY6; NSHoG: $data["\x69\155\x67\x73"] = empty($images) ? $card["\151\x6d\x67\x73"] : $images; goto TZbeP; j1EZo: lCu2R: goto Bwkku; l0s13: $mobile_verify_status = pdo_fetchcolumn("\123\105\114\105\103\124\40\140\155\x6f\142\151\154\x65\137\x76\x65\x72\x69\x66\171\x5f\x73\164\x61\x74\165\x73\140\40\106\122\117\x4d\x20" . tablename("\141\155\157\x75\x73\145\137\x77\x78\x61\x70\160\137\x73\171\x73\x73\145\164") . "\x20\127\110\x45\122\x45\40\x60\x75\x6e\151\141\x63\151\x64\140\x3d\x20\72\x77\145\151\144\40\x20\154\x69\x6d\x69\164\x20\61\x20", array("\72\x77\x65\151\144" => $uniacid)); goto rXvBY; IH9bd: $data = array("\165\x6e\x69\x61\x63\151\144" => $uniacid, "\x6f\160\145\x6e\x69\144" => $from, "\155\x6f\x62\151\154\x65" => $_GPC["\155\x6f\x62\151\154\x65"], "\x73\164\x61\x74\x75\x73" => 0, "\141\166\141\164\x65\162" => $avatar, "\145\155\x61\151\x6c" => $_GPC["\145\155\x61\151\x6c"], "\x6a\x6f\x62" => $_GPC["\x6a\x6f\142"], "\x75\163\145\162\156\x61\x6d\x65" => $username, "\167\x65\x69\170\x69\x6e" => $_GPC["\167\145\151\x78\151\156"], "\143\x6f\155\160\x61\156\171" => $_GPC["\x63\x6f\x6d\x70\x61\x6e\x79"], "\167\145\x69\x78\151\x6e\x49\x6d\x67" => $_GPC["\167\x65\x69\x78\x69\x6e\111\155\147"], "\144\145\x73\x63" => $_GPC["\144\145\x73\x63"], "\x69\155\147\x73" => $images); goto tseEm; MCGY6: if ($sDbZ9) { goto DTHql; } goto yvxvQ; acoJS: $apiCardid = pdo_insertid(); goto P6DHz; SwyqN: $down_images = array(); goto AGd0B; epwC9: $userVerifyCode = pdo_fetch("\x53\x45\114\x45\103\x54\x20\x60\151\x64\x60\54\140\x63\157\144\x65\140\54\x60\143\162\x65\x61\x74\145\x74\x69\155\x65\x60\54\x60\x73\x74\141\164\165\163\140\x20\106\x52\x4f\x4d\x20" . tablename("\x61\155\157\165\163\145\x5f\x77\x78\141\160\160\x5f\x73\155\163") . "\40\x57\110\105\x52\x45\x20\140\x75\x6e\151\x61\x63\x69\x64\x60\75\40\x3a\165\156\x69\141\143\151\144\40\x61\x6e\x64\x20\140\155\157\142\151\154\145\x60\x3d\x3a\155\157\142\x69\154\x65\x20\x6c\151\155\151\x74\40\x31", array("\x3a\165\x6e\x69\x61\x63\151\144" => $uniacid, "\x3a\155\157\142\151\154\145" => trim($_GPC["\155\x6f\142\151\x6c\x65"]))); goto Pq66J; DjvUb: return $this->result(1, "\351\252\x8c\xe8\xaf\201\347\xa0\201\xe4\270\215\346\xad\243\xe7\241\xae\xef\xbc\214\350\257\xb7\xe7\xa1\256\xe8\xae\244\351\252\214\350\257\201", $userVerifyCode["\x73\x74\x61\x74\165\x73"]); goto NOB0e; Jy35i: goto xGHb_; goto N5UNw; AvrJ2: global $_GPC, $_W; goto lFkYV; p6UGn: DTHql: goto bnQsx; LLiaI: pdo_update("\141\155\157\165\163\145\137\x77\170\141\x70\160\137\x63\141\162\x64", $data, array("\151\x64" => $apiCardid)); goto roLHr; nesAY: XKu7K: goto B4XO1; QhkZ_: BkY1d: goto Jy35i; oAm3P: pdo_insert("\141\x6d\x6f\x75\x73\x65\137\x77\x78\141\x70\x70\x5f\x63\141\162\144", $data); goto acoJS; hgllT: $apiCardid = $_GPC["\143\141\162\x64\151\144"]; goto Y7hLY; roLHr: xGHb_: goto X2QW9; rXvBY: if ($mobile_verify_status && $mobile_verify_status == 1) { goto jHXIH; } goto vrw1O; JDb1d: $J10B5 = !is_error($login_success); goto dbYpx; Y7hLY: $images = $_GPC["\151\x6d\x67\163"]; goto ILelK; P6DHz: oSqGh: goto PqsiI; bnQsx: if ($userVerifyCode["\143\x6f\x64\145"] == $phone_code) { goto lCu2R; } goto DjvUb; pw53C: taZfP: goto YsR6P; N5UNw: wNFwT: goto tFMUE; Bwkku: pdo_update("\x61\x6d\x6f\x75\163\145\x5f\167\x78\x61\x70\160\x5f\163\x6d\163", array("\x73\164\x61\164\165\x73" => 1), array("\151\144" => $userVerifyCode["\151\144"])); goto oAm3P; tFMUE: $card = pdo_fetch("\163\145\154\x65\143\x74\x20\x2a\x20\146\x72\157\x6d\x20" . tablename("\x61\155\x6f\x75\x73\x65\x5f\167\170\x61\x70\x70\137\x63\x61\x72\144") . "\40\167\x68\x65\x72\x65\40\x69\144\75\72\151\x64\x20\x61\156\144\40\165\156\151\x61\x63\151\x64\x3d\72\x77\x65\x69\x64\x20\x6c\x69\x6d\x69\164\40\x31", array("\72\151\144" => $apiCardid, "\72\167\145\x69\x64" => $uniacid)); goto NSHoG; t0XAN: $apiCardid = pdo_insertid(); goto wHdm7; MLacs: WYOhH: goto QhYwf; mTovQ: $phone_code = trim($_GPC["\x70\150\157\x6e\145\137\x63\x6f\x64\x65"]); goto epwC9; sle9Z: $nickname = $_W["\146\141\x6e\x73"]["\156\151\143\x6b\156\x61\x6d\145"]; goto AQUmu; PqsiI: pTwSI: goto QhkZ_; S9BCh: $uniacid = $_W["\x75\156\151\x61\143\151\x64"]; goto sle9Z; Q0GCa: return $this->result($login_success["\x65\x72\162\156\x6f"], $login_success["\155\145\163\x73\141\x67\x65"]); goto nesAY; Dexex: jHXIH: goto mTovQ; TZbeP: $data["\167\145\x69\x78\151\x6e\x49\155\x67"] = empty($_GPC["\x77\145\x69\x78\x69\x6e\111\155\147"]) ? $card["\x77\x65\151\x78\x69\156\111\155\147"] : $_GPC["\x77\x65\151\x78\x69\156\x49\155\147"]; goto LLiaI; QhYwf: $images = iserializer($down_images); goto mAZGL; uSJui: OeZyp: goto hNmTi; YsR6P: $mins = intval((time() - $userVerifyCode["\143\162\145\141\x74\145\164\x69\x6d\145"]) % 86400 % 3600 / 60); goto L0Lc4; ILelK: $imgs = explode("\174", $images); goto SwyqN; IQYyY: return $this->result(1, "\xe6\255\244\351\252\214\350\xaf\x81\347\240\201\xe5\xb7\262\347\273\217\xe5\244\xb1\346\x95\x88", $mins); goto uSJui; fmG3i: if ($Zm7PX) { goto OeZyp; } goto IQYyY; vrw1O: pdo_insert("\x61\x6d\x6f\x75\163\x65\137\x77\170\x61\x70\x70\137\143\141\x72\144", $data); goto t0XAN; NOB0e: goto oSqGh; goto j1EZo; yvxvQ: return $this->result(1, "\346\255\244\xe9\xaa\214\xe8\xaf\x81\347\xa0\x81\345\xb7\xb2\xe7\xbb\x8f\xe8\xa2\253\xe4\xbd\xbf\347\x94\250", $userVerifyCode["\x73\164\141\164\165\163"]); goto p6UGn; wHdm7: goto BkY1d; goto Dexex; urvHq: return $this->result(1, "\346\202\xa8\xe8\xbe\223\xe5\x85\245\347\x9a\204\346\211\213\346\234\xba\345\217\267\347\240\x81\xe4\xb8\215\xe6\xad\243\xe7\241\256\357\xbc\214\350\257\267\xe7\241\xae\350\xae\xa4\350\276\223\345\205\245", $phone_code); goto nrOfs; X2QW9: return $this->result(0, '', $apiCardid); goto LBw7V; AQUmu: $avatar = empty($_GPC["\141\x76\141\164\141\x72\125\x72\154"]) ? $_W["\x66\141\x6e\x73"]["\141\x76\141\x74\141\162"] : $_GPC["\x61\166\141\x74\x61\x72\125\x72\154"]; goto hgllT; lFkYV: $login_success = $this->checkLogin(); goto JDb1d; Pq66J: if (!empty($userVerifyCode)) { goto taZfP; } goto urvHq; B4XO1: $from = $_W["\146\141\156\x73"]["\157\x70\145\x6e\x69\x64"]; goto S9BCh; AGd0B: foreach ($imgs as $imgid) { $down_images[] = $imgid; sKVZf: } goto MLacs; tseEm: if ($apiCardid > 0) { goto wNFwT; } goto l0s13; LBw7V: } public function doPageApiPostChangeMobile() { goto VbXzO; fxo89: $sDbZ9 = !($userVerifyCode["\x73\164\141\x74\x75\163"] == 1); goto CGoKt; JyRJC: goto kXv_v; goto ljd0C; pgWhA: $data = array("\155\x6f\x62\x69\x6c\x65" => trim($_GPC["\x6d\x6f\x62\151\154\x65"])); goto A2Weo; SPiGO: BXn1A: goto clf8b; smMLV: return $this->result(1, "\346\255\xa4\xe9\252\x8c\xe8\257\x81\xe7\240\x81\345\267\xb2\347\273\x8f\350\xa2\xab\344\xbd\277\xe7\x94\xa8", $userVerifyCode["\163\164\x61\164\165\x73"]); goto lhWE5; qUcWu: kXv_v: goto LtNuV; uYWXS: IiiVd: goto slZxE; kbr9T: if ($userVerifyCode["\x63\157\x64\x65"] == $phone_code) { goto IiiVd; } goto xLGvQ; VbXzO: global $_GPC, $_W; goto IDEQp; ck91R: cvqoc: goto y1lPf; Iqh7V: if ($apiCardid > 0) { goto k3l9K; } goto ecx1D; KQKjd: return $this->result(1, "\346\x89\213\xe6\234\xba\xe5\217\267\347\xa0\x81\344\xb8\x8d\346\xad\243\xe7\xa1\256\357\274\x8c\xe8\257\xb7\xe7\xa1\xae\350\256\xa4\351\252\214\xe8\xaf\201", $phone_code); goto Njf8z; c7bWJ: if ($Zm7PX) { goto fDr5h; } goto DPqo4; slZxE: pdo_update("\x61\155\x6f\x75\x73\x65\x5f\x77\170\x61\160\x70\x5f\163\155\x73", array("\x73\164\141\164\165\163" => 1), array("\x69\144" => $userVerifyCode["\x69\x64"])); goto FNN0F; x4Q1R: Rbi8g: goto oUkIu; cN6KG: goto cvqoc; goto uYWXS; ZOlRZ: $apiCardid = intval($_GPC["\x63\x61\x72\144\x69\144"]); goto Iqh7V; FKjKS: fDr5h: goto fxo89; vBBLB: $Zm7PX = !($mins > 30); goto c7bWJ; ljd0C: k3l9K: goto pgWhA; PF2Uc: pdo_update("\x61\x6d\x6f\x75\x73\145\137\x77\170\141\160\x70\x5f\x63\x61\162\x64", $data, array("\151\x64" => $apiCardid)); goto I4jwb; A2Weo: $mobile_verify_status = pdo_fetchcolumn("\x53\x45\114\105\103\x54\x20\140\x6d\x6f\142\x69\x6c\x65\x5f\166\145\x72\x69\x66\171\x5f\x73\x74\141\164\165\163\140\40\106\x52\x4f\115\x20" . tablename("\141\x6d\x6f\x75\x73\x65\x5f\167\x78\141\x70\160\x5f\x73\171\x73\x73\145\x74") . "\x20\127\110\105\122\x45\x20\140\165\x6e\151\x61\143\151\144\140\x3d\40\x3a\x77\x65\151\144\x20\x20\154\151\x6d\x69\x74\x20\61\40", array("\72\167\x65\151\144" => $uniacid)); goto V4V9O; oUkIu: return $this->result(0, '', $apiCardid); goto qUcWu; T_MGY: $userVerifyCode = pdo_fetch("\x53\105\114\105\x43\124\x20\140\x69\144\x60\x2c\140\143\x6f\144\145\140\x2c\x60\143\x72\x65\141\164\x65\x74\151\x6d\145\x60\54\x60\x73\164\x61\164\165\163\x60\40\x46\122\117\x4d\40" . tablename("\x61\155\157\x75\163\x65\137\x77\x78\141\160\160\137\x73\155\x73") . "\x20\127\x48\105\x52\105\x20\140\165\156\151\x61\x63\x69\144\140\75\x20\72\x75\x6e\151\141\143\x69\x64\x20\x61\x6e\144\40\x60\155\x6f\142\x69\154\x65\x60\x3d\72\x6d\x6f\x62\151\x6c\145\40\x6c\x69\x6d\151\x74\40\x31\x20", array("\x3a\165\x6e\x69\141\x63\x69\144" => $uniacid, "\x3a\155\157\x62\x69\154\x65" => trim($_GPC["\155\x6f\x62\x69\154\x65"]))); goto BevQQ; CJ4ag: $mins = intval((time() - $userVerifyCode["\143\x72\145\x61\x74\x65\164\151\155\145"]) % 86400 % 3600 / 60); goto vBBLB; IDEQp: $uniacid = intval($_W["\x75\x6e\x69\141\x63\x69\x64"]); goto ZOlRZ; DPqo4: return $this->result(1, "\xe6\255\244\xe9\252\214\350\257\201\347\240\x81\xe5\267\xb2\xe7\273\217\xe5\xa4\xb1\xe6\x95\x88", $mins); goto FKjKS; BevQQ: if (!empty($userVerifyCode)) { goto dfaLW; } goto KQKjd; GJnhg: dfaLW: goto CJ4ag; Njf8z: goto DQRaS; goto GJnhg; CGoKt: if ($sDbZ9) { goto aABor; } goto smMLV; I4jwb: goto Rbi8g; goto SPiGO; FNN0F: pdo_update("\x61\155\157\x75\163\x65\x5f\167\x78\x61\x70\x70\137\143\x61\162\x64", $data, array("\x69\x64" => $apiCardid)); goto ck91R; clf8b: $phone_code = trim($_GPC["\x70\x68\157\156\145\137\143\157\x64\145"]); goto T_MGY; y1lPf: DQRaS: goto x4Q1R; xLGvQ: return $this->result(1, "\351\252\x8c\350\xaf\x81\xe7\240\x81\344\xb8\215\346\xad\xa3\xe7\241\xae\357\xbc\214\xe8\257\267\xe7\xa1\xae\350\xae\244\351\252\x8c\350\xaf\201", $userVerifyCode["\163\164\141\164\x75\163"]); goto cN6KG; lhWE5: aABor: goto kbr9T; V4V9O: if ($mobile_verify_status && $mobile_verify_status == 1) { goto BXn1A; } goto PF2Uc; ecx1D: return $this->result(1, '', $apiCardid); goto JyRJC; LtNuV: } public function doPageApiPostUser() { goto w1XVw; phGnX: $data["\165\x6e\151\141\x63\x69\x64"] = $uniacid; goto wpnRr; iQl3F: if ($J10B5) { goto WJu4A; } goto X__qF; IL3ZV: iSuVX: goto OqXye; g1_Dr: $uid = pdo_insertid(); goto KBCpg; KBCpg: return $this->result(0, '', $uid); goto OyzkT; w1XVw: global $_GPC, $_W; goto Nb1I1; bHs2W: $uniacid = intval($_W["\165\x6e\x69\x61\x63\x69\x64"]); goto Ebkp1; pW8RS: $data = array("\x72\145\141\154\x6e\x61\x6d\145" => trim($_GPC["\x72\x65\141\154\x6e\x61\155\x65"]), "\155\x6f\142\x69\154\x65" => trim($_GPC["\x6d\x6f\x62\x69\x6c\145"]), "\141\144\144\x72\145\x73\163" => trim($_GPC["\x61\144\144\x72\x65\x73\x73"]), "\157\160\x65\156\151\x64" => $from, "\163\x74\x61\x74\165\x73" => 0, "\163\145\x78" => trim($_GPC["\x73\145\170"]), "\x64\x65\163\143" => trim($_GPC["\144\145\x73\x63"])); goto c2BMX; OyzkT: goto iSuVX; goto gOuqh; W4s00: pdo_update("\x61\x6d\157\x75\x73\x65\x5f\167\170\x61\x70\x70\137\155\145\155\142\x65\162", $data, array("\151\x64" => $uid)); goto LOypM; Ebkp1: $uid = intval($_GPC["\165\x69\144"]); goto pW8RS; X__qF: return $this->result($login_success["\145\x72\162\x6e\157"], $login_success["\x6d\145\163\163\141\147\x65"]); goto Hu5Rf; pnaFH: $from = $_W["\146\141\156\163"]["\157\160\x65\156\151\144"]; goto bHs2W; gOuqh: Pr94f: goto W4s00; Hu5Rf: WJu4A: goto pnaFH; tmJ3H: pdo_insert("\x61\x6d\157\x75\163\x65\137\167\170\x61\x70\x70\x5f\155\x65\155\142\145\x72", $data); goto g1_Dr; c2BMX: if ($uid > 0) { goto Pr94f; } goto phGnX; h8E5b: $J10B5 = !is_error($login_success); goto iQl3F; Nb1I1: $login_success = $this->checkLogin(); goto h8E5b; LOypM: return $this->result(0, '', $uid); goto IL3ZV; wpnRr: $data["\143\162\x65\x61\x74\x65\164\x69\155\x65"] = time(); goto tmJ3H; OqXye: } public function doPageApiGetUserInfo() { goto jAGAQ; SK_DC: goto kq8W2; goto cxoiR; niKML: $J10B5 = !is_error($login_success); goto mayAM; m0yO0: kq8W2: goto kQ5aT; mayAM: if ($J10B5) { goto cv917; } goto W76qo; S3nZ1: $openid = $_W["\x6f\x70\145\156\151\x64"]; goto DptN0; cDOPM: $login_success = $this->checkLogin(); goto niKML; MBv74: return $this->result(0, '', $member); goto m0yO0; y1lK3: return $this->result(1, '', $openid); goto SK_DC; Wqi9q: cv917: goto S3nZ1; xrEnk: if (!empty($member)) { goto wZe1t; } goto y1lK3; cxoiR: wZe1t: goto MBv74; jAGAQ: global $_W; goto qUlZc; W76qo: return $this->result($login_success["\x65\x72\x72\156\157"], $login_success["\155\145\163\x73\141\x67\x65"]); goto Wqi9q; DptN0: $member = pdo_fetch("\x53\x45\114\105\103\x54\40\x2a\40\106\x52\x4f\x4d\x20" . tablename("\141\155\157\165\x73\145\x5f\167\x78\x61\x70\160\137\x6d\x65\155\142\x65\162") . "\x20\x57\x48\x45\x52\x45\x20\x60\165\156\151\x61\x63\151\144\x60\75\72\167\x65\151\144\40\141\x6e\x64\x20\140\157\x70\145\156\x69\144\x60\x3d\x3a\157\x70\x65\156\151\144\40\154\x69\x6d\x69\164\40\61", array("\x3a\x77\x65\151\144" => $uniacid, "\72\157\160\145\x6e\x69\144" => $openid)); goto xrEnk; qUlZc: $uniacid = $_W["\165\156\x69\141\x63\x69\144"]; goto cDOPM; kQ5aT: } public function doPagePay() { goto slbhf; a45Em: $login_success = $this->checkLogin(); goto WaG1P; x00_w: $pay_params["\x6f\x72\144\145\162\151\x64"] = $orderid; goto SAb0y; Bxsl5: $order = pdo_fetch("\123\105\114\105\103\x54\40\52\x20\106\122\x4f\115\x20" . tablename("\141\155\x6f\165\163\x65\137\x73\x68\x6f\160\160\151\156\147\x33\x5f\x6f\x72\x64\x65\x72") . "\x20\x57\110\x45\122\x45\40\151\x64\x3d{$orderid}\x20\x41\x4e\x44\40\x77\x65\151\144\x20\x3d\x20\47{$uniacid}\x27\x20\x20"); goto LtR5w; WjPFw: iIWgX: goto ae4u5; gkoHq: pdo_insert("\141\155\157\165\163\x65\137\163\x68\157\x70\160\x69\x6e\x67\63\137\146\141\x6e\163", $fdata); goto jVo_q; db0DR: return $this->result($login_success["\x65\x72\x72\x6e\157"], $login_success["\x6d\145\x73\163\x61\x67\x65"]); goto UDYPS; Ia33U: if ($J10B5) { goto vMKMt; } goto db0DR; qz7e1: $goodsArr = json_decode($orderparam, true); goto tryQr; PdbmR: if ($YuFat) { goto JvZjz; } goto wTeh7; sxxtG: goto d1H0q; goto oh65O; jVo_q: RywCY: goto XkHyT; F6QD5: if ($t_WIv) { goto EJ5jW; } goto xg67k; ShcGr: $send["\x6b\x65\171\x77\157\162\144\x34"] = array("\x76\x61\154\165\145" => date("\x59\345\271\xb4\x6d\xe6\x9c\x88\144\346\227\245", empty($data["\x63\162\x65\141\164\145\x74\151\155\x65"]) ? $order["\x63\162\x65\x61\x74\x65\x74\151\x6d\x65"] : $data["\143\x72\145\141\x74\x65\x74\151\x6d\145"]), "\x63\157\154\x6f\x72" => "\x23\60\x30\x30"); goto j4u6m; wTeh7: return $this->result(1, "\346\212\261\xe6\xad\x89\xef\xbc\x8c\xe6\202\250\347\232\204\350\xb4\xad\xe7\x89\xa9\350\275\246\351\207\214\346\xb2\xa1\xe6\234\211\344\273\273\xe4\275\x95\345\x95\206\xe5\x93\201\xef\xbc\214\xe8\xaf\267\345\x85\210\350\xb4\255\xe4\271\260\357\274\x81" . $orderid, $orderparam); goto R6Tmd; gZmVx: $orderid = intval($_GPC["\151\144"]); goto qXBLg; Gnfj8: foreach ($goodsArr as $row) { goto w_6ja; w_6ja: $H6HeT = !(empty($row) || $row["\156\x75\x6d\163"] < 1); goto cnz_g; IyG62: VexIk: goto sPr5V; la3BI: goto VexIk; goto VwvIv; VwvIv: QASq_: goto DLhUT; cnz_g: if ($H6HeT) { goto QASq_; } goto la3BI; DLhUT: pdo_insert("\x61\155\157\x75\x73\x65\x5f\163\x68\x6f\160\x70\151\x6e\147\x33\x5f\157\162\x64\145\162\x5f\x67\157\157\144\x73", array("\167\145\151\144" => $uniacid, "\147\157\x6f\144\163\151\144" => $row["\x64\151\163\150\145\x73\x5f\x69\x64"], "\157\162\144\145\162\x69\144" => $orderid, "\164\157\164\141\154" => $row["\x6e\x75\155\163"], "\x64\x65\163\x63\162\x69\x70\x74\151\157\156" => $row["\144\x65\163\x63\x72\x69\160\x74\x69\x6f\x6e"], "\x63\162\145\x61\x74\x65\x74\151\x6d\145" => TIMESTAMP)); goto IyG62; sPr5V: } goto CYjHL; ovhXc: $data = array("\x77\145\151\144" => $uniacid, "\146\x72\x6f\x6d\x5f\x75\x73\145\162" => $from, "\163\x68\157\160\151\x64" => intval($_GPC["\x73\150\157\160\x69\x64"]), "\157\162\144\145\162\163\x6e" => date("\171\x6d\x64") . sprintf("\45\60\x34\x64", $_W["\146\x61\156\163"]["\151\x64"]) . random(4, 1), "\x73\164\x61\164\165\x73" => 0, "\163\145\x6e\144\x74\x79\160\x65" => 0, "\x70\x61\x79\x74\171\160\x65" => 0, "\143\157\x75\x70\x6f\x6e\x69\x64" => $couponId, "\164\157\x74\141\154\x6e\x75\x6d" => $_GPC["\x74\157\164\x61\x6c\156\x75\x6d"], "\x74\157\164\x61\154\160\162\x69\x63\x65" => $_GPC["\164\157\x74\x61\154\x50\x72\151\x63\145"], "\143\162\x65\x61\x74\145\x74\151\155\145" => TIMESTAMP, "\163\145\x63\162\x65\164\151\x64" => random(4, 1), "\x70\162\x69\x6e\164\x5f\x73\x74\141" => 0, "\145\x78\160\162\x65\163\x73\x70\x72\151\x63\145" => "\345\xb0\x8f\347\250\x8b\345\xba\x8f", "\x74\145\x6c" => trim($_GPC["\164\145\x6c"]), "\x67\165\145\163\164\x5f\x6e\x61\155\x65" => trim($_GPC["\165\163\145\x72\x6e\x61\155\145"]), "\147\x75\145\163\164\x5f\x61\144\144\162\x65\x73\163" => trim($_GPC["\x61\x64\144\162\x65\163\163"]), "\162\x65\155\141\162\153" => trim($_GPC["\x72\x65\x6d\141\162\x6b"])); goto wCRx6; h7H6U: goto RywCY; goto ujI09; ujI09: LI_Nq: goto gkoHq; VHOXg: $uniacid = $_W["\165\x6e\x69\x61\143\x69\144"]; goto Kv1kH; rgZWB: eR7k8: goto gCsXU; F3aF4: $send["\153\x65\x79\167\157\x72\x64\x32"] = array("\166\x61\154\165\145" => empty($data["\x74\x6f\164\141\x6c\160\x72\151\x63\145"]) ? $order["\164\157\164\x61\x6c\x70\162\x69\x63\x65"] : $data["\164\x6f\164\x61\x6c\x70\162\151\143\145"] . "\345\205\x83", "\143\x6f\x6c\x6f\162" => "\43\x30\x30\60"); goto frOKt; gqtFL: $orderparam = str_replace("\42\42\x6e\x75\x6d\163\42\42", "\x22\156\x75\x6d\163\42", $orderparam); goto qz7e1; qXBLg: if ($orderid > 0) { goto ClmU1; } goto scDS7; j4u6m: if (!empty($_GPC["\151\x73\164\x79\x70\x65"]) && $_GPC["\x69\x73\x74\x79\x70\x65"] == 0) { goto DZ6nG; } goto uifSH; VZmQb: pdo_update("\141\x6d\157\165\163\x65\137\163\x68\157\x70\160\x69\x6e\x67\x33\137\x6f\162\144\145\162", array("\160\162\145\x70\141\x79\137\x69\x64" => $prepay_id), array("\151\x64" => $orderid)); goto pdtCM; R2fwI: load()->func("\x6c\x6f\x67\x67\151\156\147"); goto VHOXg; VlFeL: $this->sendTplNotice($from, $set["\x70\x72\x69\x6e\x74\x5f\142\157\x74\x74\x6f\155"], "\x61\x6d\157\x75\x73\145\x5f\x6f\x72\x64\145\x72\163\x2f\160\141\147\145\x73\x2f\x6f\162\144\x65\162\137\x6c\x69\163\164\x2f\x69\156\x64\145\x78\x3f\151\x64\75" . $orderid, trim($_GPC["\x66\x6f\162\x6d\151\x64"]), $send, "\153\145\x79\x77\x6f\162\144\x31\56\104\101\124\101"); goto d1w7l; TCS1C: $set = pdo_fetch("\x53\x45\x4c\105\103\x54\x20\x2a\40\x46\x52\x4f\115\x20" . tablename("\x61\x6d\157\165\163\145\137\163\150\157\160\160\x69\156\x67\63\x5f\x73\145\x74") . "\40\127\110\x45\x52\105\40\x77\x65\151\144\x20\75\40\72\x77\x65\151\x64", array("\x3a\x77\145\151\x64" => $_W["\x75\156\151\141\x63\151\144"])); goto yKCzt; bGvVJ: $orderparam = str_replace("\x22\x22\x70\162\x69\143\145\42\x22", "\x22\160\162\151\143\145\42", $orderparam); goto gqtFL; uifSH: if (!empty($_GPC["\151\163\164\x79\160\145"]) && $_GPC["\x69\163\x74\171\x70\x65"] == 1) { goto iIWgX; } goto BCclq; NgACh: if ($QD302) { goto veaQB; } goto j8E7y; VdXJW: $goods = pdo_fetchall("\x53\x45\114\x45\x43\124\x20\x2a\40\106\x52\117\115\40" . tablename("\x61\155\x6f\x75\x73\x65\137\x73\x68\157\160\x70\x69\156\x67\x33\x5f\147\x6f\x6f\144\163") . "\40\40\x57\x48\105\122\105\x20\151\x64\x20\x49\x4e\x20\x28\47" . implode("\x27\54\x27", array_keys($goodsid)) . "\x27\51"); goto b7HoP; Kv1kH: $from = $_W["\x6f\x70\x65\156\151\144"]; goto CFvZr; SAb0y: $UGB26 = !is_error($pay_params); goto xhA17; xAEE3: $totalprice = $_GPC["\x74\157\164\141\154\x50\162\x69\x63\x65"]; goto sxxtG; pdtCM: return $this->result(0, "\xe8\257\245\xe5\225\x86\xe6\210\xb7\xe6\x94\257\xe4\273\230\xe8\256\276\xe7\xbd\256\xe6\210\x90\xe5\212\x9f", $pay_params); goto HefAf; d1w7l: goto eR7k8; goto WjPFw; Dl7VI: d1H0q: goto TCS1C; UDYPS: vMKMt: goto R2fwI; zIs6H: pdo_update("\141\x6d\157\165\163\145\137\x73\150\157\x70\160\151\x6e\x67\63\x5f\x66\x61\156\163", $fdata, array("\146\x72\157\155\x5f\x75\163\145\162" => $from)); goto h7H6U; R6Tmd: JvZjz: goto tX1Bw; slbhf: global $_GPC, $_W; goto a45Em; scDS7: $orderparam = $_GPC["\157\x72\x64\145\162"]; goto u6ulE; xg67k: return $this->result(1, "\xe5\x90\x8e\xe5\217\260\xe5\x8f\x82\346\x95\260\xe8\256\xbe\xe7\275\xae\346\262\xa1\350\xae\276\xe7\275\256"); goto FtpZu; WaG1P: $J10B5 = !is_error($login_success); goto Ia33U; wCRx6: pdo_insert("\x61\x6d\157\x75\163\145\137\163\x68\157\x70\x70\151\x6e\x67\63\137\x6f\162\144\145\162", $data); goto kJMv8; PerVi: $send["\146\151\162\x73\x74"] = array("\x76\141\x6c\165\145" => "\xe5\260\x8a\xe6\225\254\347\x9a\204\xe4\274\232\345\221\230\xef\274\x8c\346\202\250\xe7\x9a\x84\xe8\xae\xa2\345\x8d\x95\xe6\217\220\xe4\272\244\346\x88\220\xe5\212\x9f\xef\274\x8c\xe8\xaf\xb7\345\xb0\275\345\277\xab\xe4\xbb\230\346\xac\xbe\343\x80\202", "\x63\157\154\157\x72" => "\x23\60\x30\60"); goto iKGNh; w04HY: $fans = pdo_fetch("\x53\105\x4c\x45\103\124\x20\x2a\x20\x46\122\117\115\40" . tablename("\x61\155\x6f\x75\163\x65\x5f\x73\150\x6f\160\x70\x69\156\x67\63\x5f\x66\x61\156\x73") . "\x20\127\110\105\122\x45\x20\140\167\145\x69\x64\140\75\x20\x3a\x77\x65\x69\144\40\x61\156\144\40\x60\x66\x72\x6f\x6d\137\x75\163\x65\162\x60\75\72\157\160\x65\x6e\151\144\40", array("\72\167\x65\151\144" => $_W["\x75\x6e\151\141\143\151\144"], "\x3a\x6f\160\x65\156\x69\144" => $from)); goto ko3bz; gCsXU: veaQB: goto A6KHy; kJMv8: $orderid = pdo_insertid(); goto Gnfj8; XIoId: jlrjn: goto jsSZb; CYjHL: rdPOZ: goto xAEE3; xhA17: if ($UGB26) { goto jlrjn; } goto AxtTG; u6ulE: $YuFat = !empty($orderparam); goto PdbmR; b7HoP: $gdetail = ''; goto cTrfp; j8E7y: $goodsid = pdo_fetchall("\123\x45\x4c\x45\103\124\x20\147\x6f\157\144\x73\151\144\x2c\40\x74\x6f\x74\x61\154\x20\106\122\x4f\x4d\40" . tablename("\141\x6d\x6f\x75\163\145\137\163\x68\x6f\x70\x70\151\156\x67\63\x5f\x6f\x72\x64\x65\162\137\147\x6f\x6f\144\x73") . "\40\127\110\105\122\105\40\157\x72\x64\x65\162\151\x64\40\75\x20\x27{$orderid}\x27", array(), "\147\157\x6f\x64\163\151\144"); goto VdXJW; yKCzt: $t_WIv = !($set == false); goto F6QD5; pDHAP: rZmje: goto PerVi; arqwQ: $orderparam = str_replace("\42\42\x64\x69\x73\x68\x65\163\137\151\144\42\x22", "\x22\x64\151\163\x68\x65\x73\x5f\x69\144\x22", $orderparam); goto bGvVJ; jsSZb: $prepay_id = str_replace("\160\162\x65\x70\x61\171\x5f\151\x64\75", '', $pay_params["\x70\x61\x63\153\141\147\x65"]); goto VZmQb; LRkOr: $fdata = array("\160\150\157\x6e\145" => $_GPC["\x74\x65\x6c"], "\146\162\157\155\x5f\165\163\145\162" => $from, "\x75\163\x65\x72\x6e\141\155\145" => trim($_GPC["\x75\163\145\162\x6e\141\x6d\145"])); goto w04HY; XkHyT: $QD302 = !(!empty($set["\x70\162\151\156\164\x5f\x62\157\164\164\157\x6d"]) && !empty($from)); goto NgACh; Hc1VC: goto eR7k8; goto FwrLk; tryQr: $couponId = intval($_GPC["\x63\157\x75\160\157\156\x49\144"]); goto ovhXc; oh65O: ClmU1: goto Bxsl5; FwrLk: DZ6nG: goto VlFeL; Y0qDa: $pay_params = $this->pay($payparam); goto x00_w; iKGNh: $send["\153\x65\x79\x77\157\x72\x64\x31"] = array("\x76\141\154\165\x65" => empty($data["\157\x72\144\145\x72\x73\x6e"]) ? $order["\157\x72\x64\x65\x72\x73\156"] : $data["\x6f\x72\144\x65\x72\x73\156"], "\x63\x6f\x6c\157\162" => "\x23\60\x30\60"); goto F3aF4; LtR5w: $totalprice = $order["\164\157\x74\141\154\160\162\151\x63\145"]; goto Dl7VI; CFvZr: $fans = pdo_fetch("\x53\x45\x4c\105\103\124\40\52\40\x46\122\x4f\115\x20" . tablename("\x61\x6d\157\x75\x73\145\x5f\x73\x68\157\x70\160\x69\156\147\63\137\x66\141\x6e\x73") . "\x20\x57\110\105\x52\105\40\140\167\x65\x69\144\x60\x3d\x20\x3a\167\145\x69\144\x20\141\x6e\144\x20\140\x66\162\157\x6d\x5f\x75\163\x65\162\x60\x3d\x3a\157\160\145\x6e\151\x64\x20", array("\72\x77\x65\151\144" => $_W["\165\x6e\151\x61\x63\x69\144"], "\x3a\157\x70\x65\x6e\x69\144" => $from)); goto gZmVx; cTrfp: foreach ($goods as $g) { $gdetail .= $g["\164\151\164\154\145"]; eaDWE: } goto pDHAP; AxtTG: return $this->result(1, "\350\xaf\245\xe5\225\206\xe6\x88\xb7\346\x94\xaf\xe4\273\230\xe5\x87\272\xe9\227\256\xe9\xa2\230\344\xba\206", $pay_params); goto XIoId; A6KHy: $payparam = array("\164\x69\144" => intval($orderid), "\x75\163\x65\x72" => $from, "\x66\145\145" => $totalprice, "\164\x69\x74\x6c\145" => "\345\xb0\x8f\347\250\x8b\xe5\xba\x8f\xe7\202\271\351\244\x90\346\x94\257\344\273\x98"); goto Y0qDa; frOKt: $send["\x6b\145\171\x77\157\162\144\x33"] = array("\166\x61\154\x75\145" => $gdetail, "\143\157\154\x6f\x72" => "\43\x30\x30\x30"); goto ShcGr; ko3bz: if (empty($fans)) { goto LI_Nq; } goto zIs6H; tX1Bw: $orderparam = str_replace("\x26\x71\x75\x6f\x74\x3b", "\x22\x22", $orderparam); goto arqwQ; ae4u5: $this->sendTplNotice($from, $set["\x70\x72\x69\156\x74\137\x62\x6f\x74\164\x6f\x6d"], "\x61\155\x6f\x75\163\x65\x5f\167\141\x69\155\x61\151\x2f\x70\141\147\x65\163\x2f\x6f\162\144\145\x72\x5f\x6c\x69\163\x74\57\x69\x6e\144\x65\170\77\x69\x64\75" . $orderid, trim($_GPC["\x66\x6f\x72\x6d\x69\144"]), $send, "\153\x65\171\x77\x6f\162\144\x31\x2e\x44\101\x54\101"); goto rgZWB; BCclq: $this->sendTplNotice($from, $set["\x70\x72\x69\156\x74\137\142\x6f\164\x74\157\x6d"], "\x61\155\x6f\x75\163\x65\137\x6f\x72\x64\145\162\163\57\x70\141\147\145\x73\57\165\163\145\x72\x2f\165\163\145\x72", trim($_GPC["\x66\157\x72\155\x69\144"]), $send, "\x6b\145\171\167\157\x72\x64\x31\x2e\x44\x41\x54\x41"); goto Hc1VC; FtpZu: EJ5jW: goto LRkOr; HefAf: } public function payResult($params) { goto rNs3k; jOsj3: PO3Xf: goto bCi5h; r19i2: if ($params["\164\x79\x70\145"] == "\143\162\x65\144\x69\164") { goto vAjXx; } goto JqedO; IPg99: MhVH4: goto V7aZP; N3dRC: $MfJnN = empty($set["\x70\x72\151\156\164\137\x74\157\x70"]); goto KIiyG; FHxiu: VcIaG: goto nIDqQ; HzgvE: $data["\x6b\145\171\167\x6f\x72\144\x35"] = array("\166\141\x6c\x75\x65" => $gdetail, "\143\157\x6c\x6f\x72" => "\43\x30\x30\x30"); goto a5R6q; o2rwb: if ($yn0Bf) { goto tZLXd; } goto L0Vd1; j18DP: if ($r5OcA) { goto MhVH4; } goto bsBzw; Lbaax: $data["\x6b\145\171\x77\x6f\162\144\63"] = array("\x76\141\154\x75\145" => $order["\157\162\x64\145\x72\x73\x6e"], "\143\157\x6c\157\162" => "\43\x30\x30\x30"); goto l0DbJ; BijI7: $order = pdo_fetch("\123\x45\x4c\x45\103\124\40\52\40\x46\x52\117\x4d\40" . tablename("\x61\x6d\x6f\x75\x73\x65\137\163\x68\157\160\x70\x69\x6e\147\x33\137\x6f\162\144\x65\162") . "\x20\127\110\x45\x52\105\40\151\x64\x20\75\x20\x3a\x69\x64\40\101\116\x44\40\140\167\x65\151\x64\x60\40\x3d\40\72\167\x65\x69\x64\x20", array("\x3a\151\x64" => $params["\x74\151\x64"], "\x3a\x77\x65\x69\x64" => intval($_W["\x75\x6e\x69\141\x63\151\144"]))); goto r19i2; ycbIw: $gdetail = ''; goto rb9Je; KIiyG: if ($MfJnN) { goto TtvZo; } goto oG243; uWM0S: goto iBiMA; goto jOsj3; Z2azu: woLy7: goto IfI69; EMD7J: pdo_update("\x61\155\x6f\x75\x73\145\x5f\163\x68\x6f\x70\x70\x69\x6e\x67\63\137\157\162\144\x65\162", $data, array("\x69\x64" => $params["\164\x69\x64"])); goto t05zH; EMjJh: EWtPb: goto SKQDu; IfI69: $paytype = 3; goto ix0VC; SVZWC: $update["\x73\164\x61\164\165\x73"] = 1; goto Y_lVr; L0Vd1: $data["\151\163\160\141\171"] = 1; goto EMD7J; QLMOL: oiXEo: goto reUDq; reUDq: if ($paytype == 3) { goto PO3Xf; } goto pqI5k; Y16k9: $data["\164\x72\141\x6e\x73\x69\x64"] = $params["\x74\x61\x67"]["\164\x72\x61\x6e\x73\141\x63\x74\151\157\156\137\x69\144"]; goto uliq7; jmUlf: iBiMA: goto FHxiu; v4wEe: $data["\x6b\145\171\167\x6f\x72\144\62"] = array("\x76\x61\x6c\x75\x65" => date("\x59\xe5\xb9\xb4\155\xe6\x9c\210\x64\xe6\227\xa5", $order["\x63\x72\x65\141\164\145\164\151\x6d\x65"]), "\143\x6f\154\157\162" => "\43\x30\60\x30"); goto Lbaax; CXArb: load()->func("\154\157\147\x67\x69\156\x67"); goto BijI7; Y_lVr: pdo_update("\x61\155\157\165\x73\145\x5f\x63\157\x75\x70\x6f\156\x5f\162\145\143\x6f\162\144", $update, array("\x77\145\x69\x64" => intval($_W["\x75\x6e\151\x61\143\151\x64"]), "\157\x70\145\x6e\x69\144" => $order["\x66\162\x6f\x6d\x5f\165\163\x65\162"], "\x63\157\x75\x70\x6f\x6e\137\x69\144" => intval($order["\143\x6f\165\x70\x6f\156\x69\x64"]))); goto e6P_I; JT1c6: tZLXd: goto IPg99; Or_KL: $paytype = 21; goto SbMqj; dFbI4: if ($EsQWa) { goto ub82L; } goto Y16k9; HviNn: SxTNS: goto qO9Rd; e1ube: $data["\x6b\145\171\x77\x6f\162\144\x31"] = array("\x76\x61\154\165\145" => $order["\x6f\x72\144\x65\162\x73\156"], "\x63\157\154\157\x72" => "\43\x30\x30\60"); goto v4wEe; HhwQA: goto q6HRw; goto Z2azu; bCi5h: message("\346\x8f\220\344\272\xa4\346\210\x90\345\x8a\237\xef\xbc\x81", "\x2e\x2e\x2f\x2e\56\x2f\141\x70\x70\57" . $this->createMobileUrl("\165\163", array("\x6f\162\144\145\162" => $order["\x69\x64"])), "\163\x75\x63\143\x65\x73\x73"); goto jmUlf; cikI5: vAjXx: goto ykeSv; JqedO: if ($params["\164\x79\160\x65"] == "\167\x65\x63\150\141\x74") { goto JI7Wf; } goto ZxtKD; qO9Rd: $paytype = 22; goto HhwQA; D4wOy: QwUpL: goto ew5MI; l0DbJ: $data["\153\x65\x79\167\x6f\162\144\x34"] = array("\166\x61\154\x75\145" => $order["\x74\x6f\164\141\x6c\160\162\151\143\145"] . "\xe5\x85\x83", "\x63\157\x6c\x6f\x72" => "\43\x30\60\x30"); goto HzgvE; uKZAI: $AZuzX = !($params["\162\145\163\x75\x6c\x74"] == "\x73\x75\143\x63\x65\x73\x73"); goto PCadM; hxwOu: if ($params["\x74\171\160\x65"] == "\x64\145\154\x69\166\145\x72\x79") { goto woLy7; } goto Xhthq; MDI6N: goto q6HRw; goto o9Xly; X3z07: $r5OcA = !($params["\162\x65\163\x75\154\164"] == "\x73\165\143\143\x65\x73\x73" && $params["\146\162\x6f\x6d"] == "\x6e\157\x74\151\146\171"); goto j18DP; ew5MI: TtvZo: goto JT1c6; ZxtKD: if ($params["\164\x79\160\x65"] == "\x61\x6c\151\160\x61\x79") { goto SxTNS; } goto hxwOu; oG243: $goodsid = pdo_fetchall("\x53\x45\x4c\105\103\x54\x20\x67\x6f\157\144\x73\x69\x64\54\x20\x74\157\x74\x61\x6c\54\144\145\163\x63\162\x69\x70\x74\151\157\156\40\106\122\117\x4d\40" . tablename("\141\155\x6f\165\x73\x65\137\163\150\157\160\x70\x69\x6e\x67\x33\137\157\x72\144\145\x72\137\x67\157\x6f\x64\163") . "\x20\127\110\x45\122\x45\40\157\x72\x64\x65\x72\x69\x64\x20\75\x20\x27{$order["\x69\144"]}\47", array(), "\x67\157\157\x64\163\151\x64"); goto IjOOj; bsBzw: $yn0Bf = !($params["\146\145\145"] == $order["\x74\157\164\141\154\160\x72\x69\143\145"]); goto o2rwb; d_WQF: $data["\x66\x69\162\163\x74"] = array("\x76\141\x6c\165\145" => "\xe5\xb0\x8a\346\x95\xac\xe7\232\204\xe4\xbc\232\xe5\x91\x98\xef\274\x8c\346\202\xa8\345\267\262\346\x88\220\345\212\x9f\xe4\xbb\x98\xe6\xac\276\343\200\x82", "\143\157\x6c\x6f\x72" => "\x23\x30\60\60"); goto e1ube; uliq7: ub82L: goto X3z07; rNs3k: global $_W; goto CXArb; Xhthq: goto q6HRw; goto cikI5; TiU5M: $data = array("\x73\x74\141\164\x75\x73" => $params["\162\x65\163\165\x6c\x74"] == "\163\x75\143\143\x65\x73\x73" ? 1 : 0); goto eQ7oj; IjOOj: $goods = pdo_fetchall("\x53\x45\x4c\105\x43\x54\x20\x2a\x20\x46\x52\x4f\115\x20" . tablename("\141\155\x6f\x75\x73\145\137\163\x68\x6f\x70\160\x69\x6e\x67\x33\137\x67\x6f\x6f\144\x73") . "\40\40\127\110\x45\x52\105\x20\151\x64\40\111\116\x20\50\x27" . implode("\x27\x2c\47", array_keys($goodsid)) . "\x27\51"); goto ycbIw; duFWC: if ($i1Fhr) { goto YgCa1; } goto SVZWC; RHRUm: if ($V9vJo) { goto VcIaG; } goto uKZAI; YRQ_z: $data["\160\141\x79\164\171\160\x65"] = $paytype[$params["\x74\171\160\145"]]; goto I7MgP; QBdqi: $i1Fhr = !($order["\143\157\165\x70\x6f\156\x69\x64"] > 0); goto duFWC; PCadM: if ($AZuzX) { goto oiXEo; } goto QLMOL; a5R6q: $data["\x6b\145\171\167\157\162\x64\66"] = array("\166\141\154\x75\145" => "\345\xbe\256\xe4\xbf\241\xe6\x94\xaf\344\xbb\x98", "\143\157\x6c\x6f\162" => "\x23\x30\x30\x30"); goto WlT0D; o9Xly: JI7Wf: goto Or_KL; ix0VC: q6HRw: goto TiU5M; eQ7oj: $paytype = array("\x63\x72\145\144\x69\x74" => "\x31", "\167\x65\143\x68\x61\x74" => "\x32", "\x61\154\x69\160\141\171" => "\62", "\144\145\x6c\x69\x76\x65\x72\x79" => "\63"); goto YRQ_z; V7aZP: $V9vJo = !($params["\146\x72\157\155"] == "\x72\x65\x74\x75\162\x6e"); goto RHRUm; I7MgP: $EsQWa = !($params["\164\171\160\145"] == "\x77\x65\x63\x68\141\x74"); goto dFbI4; rb9Je: foreach ($goods as $g) { $gdetail .= $g["\164\x69\x74\x6c\x65"]; ldQiH: } goto EMjJh; t05zH: $set = pdo_fetch("\123\x45\114\105\103\124\40\x70\162\151\156\164\137\x74\x6f\x70\40\106\122\117\115\40" . tablename("\x61\155\157\x75\x73\145\x5f\x73\x68\157\160\160\x69\156\x67\63\137\x73\145\x74") . "\40\x57\x48\x45\122\x45\x20\167\x65\x69\x64\40\75\40\72\167\145\x69\144\x20\x6c\151\155\x69\164\40\61\x20", array("\72\167\x65\x69\x64" => $_W["\x75\x6e\151\x61\x63\151\144"])); goto QBdqi; SbMqj: goto q6HRw; goto HviNn; WlT0D: $this->sendTplNotice($order["\x66\x72\157\155\137\165\163\145\162"], $set["\x70\x72\x69\156\x74\137\x74\157\160"], "\141\x6d\x6f\x75\163\145\x5f\x6f\x72\x64\145\162\163\57\160\x61\147\x65\x73\x2f\x6d\x69\x6e\x65\57\155\151\156\145", $order["\x70\162\x65\160\x61\171\137\151\x64"], $data, "\x6b\145\x79\167\x6f\x72\144\x31\x2e\104\101\124\101"); goto D4wOy; e6P_I: YgCa1: goto N3dRC; vCjKY: if ($t6LDj) { goto QwUpL; } goto d_WQF; pqI5k: message("\346\x94\257\xe4\xbb\x98\346\210\220\xe5\x8a\x9f\xef\xbc\x81", "\56\x2e\57\x2e\x2e\x2f\141\160\x70\x2f" . $this->createMobileUrl("\144\x65\x74\141\x69\154", array("\x69\144" => $order["\x69\x64"])), "\x73\x75\x63\x63\x65\x73\163"); goto uWM0S; SKQDu: $t6LDj = empty($order["\x66\x72\157\x6d\137\x75\x73\x65\162"]); goto vCjKY; ykeSv: $paytype = 1; goto MDI6N; nIDqQ: } protected function sendTplNotice($touser, $template_id, $page = '', $form_id, $postdata, $emphasis_keyword = NULL) { goto p4_og; exOa4: yKyCl: goto RbaRd; BZK9F: $result = @json_decode($response["\x63\x6f\156\x74\x65\x6e\x74"], true); goto EUhnP; Avc10: if ($L1BQi) { goto NlERm; } goto Jn8Mg; jL6Ju: return error(-1, "\346\216\245\xe5\217\243\350\260\203\347\224\xa8\345\244\261\xe8\xb4\xa5\x2c\x20\xe5\x85\x83\xe6\225\xb0\346\x8d\256\x3a\x20{$response["\x6d\x65\164\141"]}"); goto BjeFg; V_e06: if ($smKlM) { goto C1C5i; } goto g1LGa; jYTBQ: $data = json_encode($data); goto nVExD; EDAt3: ivcck: goto jL6Ju; EUhnP: if (empty($result)) { goto ivcck; } goto CAiAx; DWLrj: T6xsN: goto p00m4; RbaRd: $QwfCf = !empty($template_id); goto vwo8J; g1LGa: $send["\145\x6d\160\150\141\163\151\163\x5f\x6b\145\171\x77\x6f\x72\x64"] = $emphasis_keyword; goto oUD1T; XTWUt: $account_api = WeAccount::create(); goto H4aGB; NMBNq: $data["\164\145\x6d\x70\154\141\x74\x65\137\151\x64"] = trim($template_id); goto YkGby; zpEal: $Y7u5g = !empty($touser); goto JbLz0; C9ZLO: if ($sPXO4) { goto scJWt; } goto ISnaZ; ISnaZ: return $accesstoken; goto Av8bG; Nk78x: return error(-1, "\350\xae\277\351\x97\xae\xe5\205\xac\xe4\xbc\x97\xe5\xb9\xb3\xe5\217\xb0\346\x8e\245\345\x8f\243\345\244\xb1\xe8\xb4\xa5\54\x20\xe9\x94\x99\xe8\xaf\257\x3a\40{$response["\155\x65\x73\163\x61\x67\145"]}"); goto tQUxX; p00m4: $L1BQi = !(empty($postdata) || !is_array($postdata)); goto Avc10; BjeFg: goto mGPux; goto H0I_z; Z84fc: return error(-1, "\350\256\xbf\351\227\256\345\276\xae\xe4\277\xa1\xe6\216\xa5\345\x8f\xa3\xe9\224\x99\350\xaf\xaf\54\40\xe9\224\231\xe8\xaf\257\xe4\273\243\xe7\xa0\x81\72\x20{$result["\x65\162\162\143\x6f\144\x65"]}\x2c\x20\xe9\x94\x99\350\257\xaf\xe4\xbf\241\346\201\257\x3a\40{$result["\x65\162\162\155\x73\x67"]}\x2c\xe4\277\241\346\x81\257\350\xaf\xa6\xe6\x83\205\357\274\x9a{$this->error_code($result["\x65\162\x72\x63\x6f\x64\145"])}"); goto OhNGA; Lv_H3: $response = ihttp_request($templateUrl, $data); goto P_Po3; OhNGA: mGPux: goto UAT1d; KwyJl: goto mGPux; goto EDAt3; UAT1d: return true; goto nA6QP; oUD1T: C1C5i: goto olD8f; sqcQH: load()->func("\x63\x6f\x6d\x6d\x75\x6e\x69\143\141\164\x69\x6f\156"); goto XTWUt; K2Jg9: return error(-1, "\345\x8f\202\xe6\x95\260\351\224\x99\xe8\257\257\54\xe6\xa8\xa1\xe6\235\xbf\xe6\xa0\x87\347\xa4\272\344\270\x8d\xe8\x83\275\xe4\xb8\272\xe7\251\xba"); goto DWLrj; GKXom: $sPXO4 = !is_error($accesstoken); goto C9ZLO; QXBRE: return error(-1, "\xe5\x8f\x82\346\x95\260\xe9\224\x99\350\257\xaf\54\xe7\xb2\211\xe4\270\235\157\x70\x65\x6e\x69\144\xe4\xb8\215\xe8\x83\xbd\xe4\xb8\xba\xe7\xa9\xba"); goto exOa4; G2NRL: $data["\146\x6f\x72\155\137\151\x64"] = trim($form_id); goto xmzfi; Av8bG: scJWt: goto zpEal; H0I_z: qB7cX: goto Z84fc; H4aGB: $accesstoken = $account_api->getAccessToken(); goto GKXom; fTVr1: $data = array(); goto mMYkw; YkGby: $data["\160\x61\x67\x65"] = trim($page); goto G2NRL; olD8f: $data["\144\141\x74\141"] = $postdata; goto jYTBQ; nVExD: $templateUrl = "\150\164\164\x70\163\x3a\x2f\57\141\x70\151\x2e\167\x65\151\170\x69\156\56\161\x71\x2e\x63\x6f\155\x2f\143\x67\151\x2d\x62\x69\156\57\155\x65\x73\x73\x61\x67\x65\57\167\x78\x6f\160\x65\156\57\x74\145\155\160\154\141\164\x65\57\163\x65\156\144\77\x61\143\143\145\x73\163\x5f\x74\x6f\x6b\145\156\x3d{$accesstoken}"; goto Lv_H3; hYKZ5: NlERm: goto fTVr1; CAiAx: if (!empty($result["\145\x72\x72\143\x6f\x64\x65"])) { goto qB7cX; } goto KwyJl; Jn8Mg: return error(-1, "\345\x8f\x82\xe6\225\xb0\351\x94\231\xe8\xaf\257\x2c\350\xaf\267\xe6\240\xb9\xe6\215\256\346\250\xa1\xe6\235\xbf\350\247\204\xe5\210\231\345\xae\214\345\226\x84\346\266\210\xe6\201\257\xe5\206\205\xe5\xae\xb9"); goto hYKZ5; JbLz0: if ($Y7u5g) { goto yKyCl; } goto QXBRE; P_Po3: $UTilV = !is_error($response); goto jRjq6; tQUxX: Lc_p7: goto BZK9F; vwo8J: if ($QwfCf) { goto T6xsN; } goto K2Jg9; p4_og: load()->model("\x6d\x63"); goto sqcQH; mMYkw: $data["\164\x6f\x75\163\x65\162"] = $touser; goto NMBNq; jRjq6: if ($UTilV) { goto Lc_p7; } goto Nk78x; xmzfi: $smKlM = !$emphasis_keyword; goto V_e06; nA6QP: } public function doPageWxUpload() { goto o98T5; mXswm: Nc16g: goto KbBqD; EDbrH: file_remote_upload($filename); goto C5bZv; r0dAF: if ($G2Ms_) { goto r1TrI; } goto bixV4; kqk12: $NxdYT = !move_uploaded_file($tmpP, $fp); goto M_pTH; C5bZv: return $this->result(0, '', "\151\155\x61\147\x65\x73\57" . $filename); goto mXswm; PcGnZ: $kiBpV = !($exename != "\160\156\147" && $exename != "\152\160\x67" && $exename != "\147\x69\x66"); goto XDgEC; t0_uC: return $this->result(1, "\346\x9c\x8d\xe5\212\xa1\xe5\x99\xa8\345\207\xba\351\x97\256\xe9\xa2\230\344\xba\x86", ''); goto CTi7b; KTSwO: $filename = $_W["\165\156\x69\x61\143\x69\144"] . "\57" . date("\131\x2f\x6d\57"); goto hj7ee; hj7ee: $eO_8F = is_dir($path . $filename); goto rOBPZ; PYF3d: $uploadfile = $path . $filename; goto LKTQj; LHZ2y: if (!empty($_FILES["\x66\x69\x6c\145"])) { goto v7M93; } goto t0_uC; kmFfc: UTPFw: goto bv7u6; XIesH: $pathinfo = pathinfo($_FILES["\146\x69\x6c\x65"]["\x6e\x61\x6d\x65"]); goto V7Iw1; s18eS: $tmpP = $_FILES["\146\151\x6c\145"]["\x74\x6d\160\137\x6e\141\x6d\x65"]; goto vTa26; rOBPZ: if ($eO_8F) { goto UTPFw; } goto z_szw; KbBqD: r1TrI: goto mdMRz; bixV4: $p = "\152\x70\145\x67"; goto KTSwO; vTa26: $G2Ms_ = !$tmpP; goto r0dAF; bv7u6: $filename = $filename . file_random_name($filename, $p); goto PYF3d; mdMRz: hFVq5: goto kNsB6; CTi7b: goto hFVq5; goto vmOXF; V7Iw1: $exename = strtolower($pathinfo["\x65\170\x74\145\156\x73\151\x6f\x6e"]); goto PcGnZ; M_pTH: if ($NxdYT) { goto Nc16g; } goto EDbrH; vmOXF: v7M93: goto s18eS; LWhMl: load()->func("\x66\x69\x6c\145"); goto XIesH; LKTQj: $fp = $uploadfile; goto kqk12; z_szw: mkdirs(dirname($path . $filename)); goto hzUa_; o98T5: global $_W; goto gJ_Ww; gJ_Ww: $path = ATTACHMENT_ROOT . "\x69\155\141\147\145\163\57"; goto LWhMl; a5Qh1: Ol8OA: goto LHZ2y; XDgEC: if ($kiBpV) { goto Ol8OA; } goto a5Qh1; hzUa_: mkdir($path . $filename); goto kmFfc; kNsB6: } private function makeActivityCode($scene, $id) { goto tdCWd; dg_rp: $account_api = WeAccount::create(); goto Cabyq; tdCWd: $sceneid = $scene . $id; goto dg_rp; Cabyq: $code = $account_api->getCodeUnlimit($sceneid); goto j__XL; Im1i0: return $code; goto hz2Kf; RS8Tq: return $path; goto pZYDR; j__XL: $hZZ1u = !is_error($code); goto m1LwY; hz2Kf: MzF1R: goto j0HID; m1LwY: if ($hZZ1u) { goto MzF1R; } goto Im1i0; j0HID: $path = $this->fileSave($code, "\x6a\160\147"); goto RS8Tq; pZYDR: } public function doPageApiCreateImage() { goto YBwK9; zLpLj: goto KT6Qw; goto TdPN8; f0TSl: $card = pdo_fetch("\x53\105\x4c\105\103\x54\x20\x2a\x20\x46\x52\117\x4d\x20" . tablename("\x61\155\x6f\165\x73\x65\137\167\170\x61\160\x70\137\143\141\x72\144") . "\x20\x57\x48\x45\x52\105\x20\140\165\x6e\151\141\143\151\144\x60\x3d\72\167\x65\151\144\40\141\x6e\144\x20\x60\157\160\x65\x6e\x69\x64\x60\75\x3a\157\160\145\156\x69\144\40\x6c\151\155\151\164\40\x31", array("\x3a\167\x65\x69\x64" => $uniacid, "\72\x6f\x70\x65\156\x69\144" => $openid)); goto zpq7l; N6n3c: ignore_user_abort(true); goto EFRIt; EW2de: goto iWmDG; goto NH30l; oE_Y6: $poster["\x66\x72\x6f\155\137\165\163\x65\x72"] = $card["\157\x70\145\156\x69\x64"]; goto Z2LzK; h9Gzx: $openid = $_W["\157\x70\145\x6e\151\x64"]; goto f0TSl; YBwK9: global $_W, $_GPC; goto k1ZLv; U5BQT: $poster["\x63\x61\x72\144\151\x64"] = $card["\x69\144"]; goto PR6DP; MKSGt: KT6Qw: goto PjkY5; rQmZZ: $uniacid = $_W["\165\x6e\x69\x61\x63\x69\144"]; goto h9Gzx; EFRIt: require_once IA_ROOT . "\57\141\x64\x64\157\x6e\x73\57\x61\x6d\157\165\x73\145\137\x77\x78\141\160\160\137\143\141\162\x64\57\x69\156\143\57\143\157\155\155\x6f\156\56\160\x68\160"; goto rQmZZ; dt1tz: pdo_update("\141\155\x6f\x75\x73\x65\x5f\x77\x78\141\160\160\x5f\143\141\x72\x64", array("\161\x72\x63\x6f\x64\x65" => $ret["\x71\162\137\x69\x6d\147"]), array("\x69\144" => $card["\151\144"])); goto l0a4T; JXK57: $qrcode = $this->makeActivityCode("\141\x6d\x6f\x75\163\x65\137\167\x78\x61\160\160\137\143\141\x72\144\x3a\160\157\x73\x74\x65\162\72", $card["\x69\x64"]); goto QcuuU; PjkY5: return $this->result(0, '', $qrcode); goto Ifls4; k1ZLv: load()->func("\146\x69\154\145"); goto N6n3c; uBYlr: if (empty($card["\x71\162\x63\x6f\x64\145"])) { goto zaT43; } goto sxzuf; QcuuU: WeUtility::logging("\x3d\x3d\161\x72\x63\x6f\x64\x65\x3d\x3d" . $qrcode); goto sroIE; TdPN8: zaT43: goto JXK57; lVCsM: $poster["\x61\166\141\x74\x61\x72"] = tomedia($card["\x61\166\x61\x74\x65\x72"]); goto uBYlr; PR6DP: $poster["\x75\x6e\151\x61\143\151\x64"] = $uniacid; goto oE_Y6; Z2LzK: $poster["\156\151\143\153\156\141\155\x65"] = $card["\165\163\x65\x72\x6e\141\155\x65"]; goto lVCsM; NH30l: fudl9: goto s1mf7; sxzuf: $qrcode = tomedia($card["\161\x72\x63\x6f\x64\145"]); goto zLpLj; qFWxO: return $this->result(1, "\345\210\233\345\xbb\272\344\272\x8c\xe7\xbb\264\xe7\xa0\x81\xe5\207\xba\351\224\231\344\272\206", $ret["\x71\x72\137\x69\x6d\x67"]); goto EW2de; l0a4T: iWmDG: goto MKSGt; dqDqN: if ($ret["\x63\157\144\145"] == 1) { goto fudl9; } goto qFWxO; zpq7l: $poster = pdo_fetch("\123\105\114\105\x43\x54\x20\x2a\x20\146\x72\157\155\x20" . tablename("\167\170\141\x70\x70\x5f\143\141\x72\x64\137\160\x6f\163\164\145\162") . "\40\x20\x77\x68\145\162\145\40\x60\165\156\151\141\x63\x69\144\x60\x3d\72\x77\x65\151\144\x20\x6c\x69\155\x69\x74\x20\x31\x20", array("\72\x77\x65\151\144" => $uniacid)); goto U5BQT; sroIE: $ret = createCodeUnlimit($poster, $qrcode); goto dqDqN; s1mf7: $qrcode = $ret["\161\x72\137\151\x6d\x67"]; goto dt1tz; Ifls4: } }